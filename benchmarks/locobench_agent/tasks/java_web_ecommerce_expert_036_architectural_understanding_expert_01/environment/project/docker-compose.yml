```yaml
# ============================================================================
# SprintCart Pro – Hyper-Productive E-Commerce Workbench
# docker-compose.yml
#
# This composition targets a realistic production-like topology while still
# being developer-friendly.  Each core infrastructure concern—database,
# caching, messaging, object storage, mail, reverse-proxy—is containerised
# and attached to an isolated network.  The Java back-end service is built
# from source and exposed through NGINX with automatic
# (development-grade) TLS certificates via mkcert.
#
# ────────────────────────────────────────────────────────────────────────────
#  IMPORTANT
#  1. Copy .env.example → .env and adjust to your environment before running
#     `docker compose up -d`.
#  2. Secrets should ideally be managed through Docker Swarm/K8s secrets.
#  3. For production, swap MailHog with a real SMTP relay and replace mkcert
#     certificates with LetsEncrypt/ACM certificates.
# ============================================================================

version: "3.9"

name: sprintcart-pro

##########################################
# GLOBAL CONFIG & EXTENSIONS
##########################################
x-common-env: &common-env
  SPRING_PROFILES_ACTIVE: docker
  JAVA_OPTS: "-XX:+UseContainerSupport -Dspring.output.ansi.enabled=ALWAYS"
  # ^--- Extend as needed (e.g., -Xms512m -Xmx2g)

x-healthcheck: &default-healthcheck
  interval: 10s
  timeout: 5s
  retries: 5
  start_period: 20s

##########################################
# SERVICES
##########################################
services:

  # -------------------------------------------------------------------------
  # PostgreSQL – Primary Relational DB
  # -------------------------------------------------------------------------
  db:
    image: postgres:15-alpine
    container_name: sprintcart-db
    restart: unless-stopped
    environment:
      POSTGRES_DB:     ${POSTGRES_DB:-sprintcart}
      POSTGRES_USER:   ${POSTGRES_USER:-sprintcart}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-sprintcart_pwd}
      TZ: "UTC"
    volumes:
      - db-data:/var/lib/postgresql/data
    networks:
      - core
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD-SHELL", "pg_isready -U $${POSTGRES_USER} -d $${POSTGRES_DB}"]

  # -------------------------------------------------------------------------
  # Redis – Low-latency Cache & Pub/Sub
  # -------------------------------------------------------------------------
  redis:
    image: redis:7-alpine
    container_name: sprintcart-redis
    restart: unless-stopped
    command: ["redis-server", "--appendonly", "yes"]
    volumes:
      - redis-data:/data
    networks:
      - core
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD", "redis-cli", "ping"]

  # -------------------------------------------------------------------------
  # RabbitMQ – Asynchronous Messaging Backbone
  # -------------------------------------------------------------------------
  rabbitmq:
    image: rabbitmq:3.12-management-alpine
    container_name: sprintcart-rabbitmq
    restart: unless-stopped
    environment:
      RABBITMQ_DEFAULT_USER: ${RABBITMQ_USER:-sprintcart}
      RABBITMQ_DEFAULT_PASS: ${RABBITMQ_PASSWORD:-sprintcart_pwd}
    volumes:
      - rabbitmq-data:/var/lib/rabbitmq
    ports:
      - "15672:15672" # Mgmt UI
    networks:
      - core
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD-SHELL", "rabbitmq-diagnostics -q ping"]

  # -------------------------------------------------------------------------
  # MinIO – S3-compatible Object Storage for file uploads
  # -------------------------------------------------------------------------
  minio:
    image: quay.io/minio/minio:RELEASE.2024-01-29T03-56-32Z
    container_name: sprintcart-minio
    restart: unless-stopped
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER:     ${MINIO_ACCESS_KEY:-minio}
      MINIO_ROOT_PASSWORD: ${MINIO_SECRET_KEY:-minio_pwd}
    volumes:
      - minio-data:/data
    ports:
      - "9000:9000" # S3 API
      - "9001:9001" # Console
    networks:
      - core
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]

  # -------------------------------------------------------------------------
  # MailHog – Catch-all SMTP server for dev/testing
  # -------------------------------------------------------------------------
  mailhog:
    image: mailhog/mailhog:v1.0.1
    container_name: sprintcart-mailhog
    restart: unless-stopped
    ports:
      - "8025:8025" # Web UI
    networks:
      - core
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8025"]

  # -------------------------------------------------------------------------
  # Java Spring Boot Back-end
  # -------------------------------------------------------------------------
  backend:
    build:
      context: .
      dockerfile: Dockerfile   # -> See /Dockerfile at repo root
    container_name: sprintcart-backend
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy
      minio:
        condition: service_healthy
      mailhog:
        condition: service_started
    environment:
      <<: *common-env
      # Database
      SPRING_DATASOURCE_URL:     jdbc:postgresql://db:5432/${POSTGRES_DB:-sprintcart}
      SPRING_DATASOURCE_USERNAME: ${POSTGRES_USER:-sprintcart}
      SPRING_DATASOURCE_PASSWORD: ${POSTGRES_PASSWORD:-sprintcart_pwd}
      # Redis
      SPRING_REDIS_HOST: redis
      # RabbitMQ
      SPRING_RABBITMQ_HOST: rabbitmq
      SPRING_RABBITMQ_USERNAME: ${RABBITMQ_USER:-sprintcart}
      SPRING_RABBITMQ_PASSWORD: ${RABBITMQ_PASSWORD:-sprintcart_pwd}
      # MinIO / S3
      S3_ENDPOINT: http://minio:9000
      S3_ACCESS_KEY: ${MINIO_ACCESS_KEY:-minio}
      S3_SECRET_KEY: ${MINIO_SECRET_KEY:-minio_pwd}
      # Mail
      MAILHOG_HOST: mailhog
      # Misc
      SERVER_PORT: 8080
    ports:
      - "8080:8080"
    networks:
      - core
      - proxy
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]

  # -------------------------------------------------------------------------
  # NGINX – Reverse-Proxy & Static Front-end Hosting
  # -------------------------------------------------------------------------
  nginx:
    image: nginx:1.25-alpine
    container_name: sprintcart-nginx
    depends_on:
      backend:
        condition: service_healthy
    volumes:
      - ./infra/nginx/conf.d:/etc/nginx/conf.d:ro
      - ./infra/nginx/certs:/etc/nginx/certs:ro
      - ./frontend/dist:/usr/share/nginx/html:ro # Vue 3 SPA
      - nginx-logs:/var/log/nginx
    ports:
      - "80:80"
      - "443:443"
    networks:
      - proxy
    restart: unless-stopped
    healthcheck:
      <<: *default-healthcheck
      test: ["CMD-SHELL", "wget -q --spider http://localhost/ || exit 1"]

##########################################
# VOLUMES
##########################################
volumes:
  db-data:
  redis-data:
  rabbitmq-data:
  minio-data:
  nginx-logs:

##########################################
# NETWORKS
##########################################
networks:
  core:
    driver: bridge
  proxy:
    driver: bridge
```