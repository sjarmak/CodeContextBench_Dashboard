```rust
//! src/constants.rs
//!
//! A centralized place for compile-time and runtime configuration constants
//! that are shared across ChirpPulse crates and binaries.  Keeping constants
//! here encourages re-use, prevents magic numbers/strings from leaking into
//! business logic, and makes it easier to discover tunables that may need to
//! be surfaced as configuration knobs in the future.
//!
//! Most values are compile-time constants (`const` or `static`).  When a
//! setting must be fetched from the environment at runtime we wrap it in
//! a `once_cell::sync::Lazy` to incur exactly one `std::env::var()` call
//! across the entire process lifetime.
//!
//! NOTE: Although this file is placed under `src/constants.txt` by request,
//! Cargo will only compile `*.rs` files.  Rename to `constants.rs` or include
//! via `include_str!` if you intend to embed the file verbatim.

use std::time::Duration;
use std::num::NonZeroUsize;
use once_cell::sync::Lazy;

/// Human-readable service identifier used in logs, tracing spans, and metrics.
pub const SERVICE_NAME: &str = "ChirpPulse";

/// Current semver of this crate.  Keep in sync with `Cargo.toml`.
pub const VERSION: &str = env!("CARGO_PKG_VERSION");

/// Default list of Kafka bootstrap servers.  
/// Overridable via `CHIRP_PULSE_KAFKA_BROKERS`.
pub static KAFKA_BROKERS: Lazy<String> = Lazy::new(|| {
    std::env::var("CHIRP_PULSE_KAFKA_BROKERS")
        .unwrap_or_else(|_| "localhost:9092".into())
});

/// Kafka topic names used across micro-services.
pub mod kafka_topics {
    /// Raw, unvalidated social events as produced by the ingress gateways.
    pub const RAW_EVENTS: &str       = "chirp.raw.events";
    /// Events that passed schema validation and deduplication.
    pub const CLEAN_EVENTS: &str     = "chirp.clean.events";
    /// Enriched events (e.g. lang detect, sentiment scores).
    pub const ENRICHED_EVENTS: &str  = "chirp.enriched.events";
    /// Compact facts about influencer relationships.
    pub const GRAPH_UPDATES: &str    = "chirp.graph.updates";
    /// Dead-letter queue for poison pills.
    pub const DLQ: &str              = "chirp.dlq";
}

/// Apache Iceberg catalog and warehouse settings.
pub mod iceberg {
    /// Warehouse directory where tables are materialised.
    pub const WAREHOUSE_DIR: &str = "s3://chirp-pulse-lake";

    /// Name of the metadata catalog (glue/hive) that tables register with.
    pub const CATALOG_NAME: &str  = "chirp_catalog";
}

/// Default concurrency knobs -------------------------------------------------

/// How many threads a typical ingest worker will spawn when no explicit
/// `RAYON_NUM_THREADS` or per-job override is supplied.
pub const DEFAULT_INGEST_PARALLELISM: NonZeroUsize =
    // SAFETY: 4 is non-zero by definition.
    unsafe { NonZeroUsize::new_unchecked(4) };

/// Maximum size of an in-memory batch before it is flushed downstream.
pub const MAX_BATCH_SIZE: usize = 5_000;

/// Retry & back-off strategy --------------------------------------------------

/// Number of times a non-fatal Kafka produce error is retried before the
/// message is sent to the DLQ.
pub const PRODUCER_RETRY_ATTEMPTS: u32 = 5;

/// Initial back-off delay for retrying transient network or broker failures.
pub const INITIAL_BACKOFF: Duration = Duration::from_millis(200);

/// Maximum back-off delay (capped exponential).
pub const MAX_BACKOFF: Duration = Duration::from_secs(30);

/// Languages supported by the *default* language-detection model.
/// More can be added dynamically via plugin loading.
pub static SUPPORTED_LANGUAGES: &[&str] = &[
    "en", // English
    "es", // Spanish
    "fr", // French
    "de", // German
    "pt", // Portuguese
    "ja", // Japanese
    "ko", // Korean
    "zh", // Chinese (simplified & traditional)
];

/// Observability --------------------------------------------------------------

/// Prometheus metrics namespace label.
pub const METRICS_NAMESPACE: &str = "chirp_pulse";

/// Jaeger/OTLP tracing service name (overrides default from tracer impl).
pub const TRACING_SERVICE_NAME: &str = "chirp-pulse";

/// Helper API -----------------------------------------------------------------

/// Return the service's user-agent string used when querying remote HTTP
/// endpoints.  Format: `SERVICE_NAME/VERSION (commit SHA)`.
///
/// The git commit hash is embedded at compile-time via `vergen` build-script,
/// falling back to `UNKNOWN` if unavailable.
pub fn user_agent() -> String {
    static GIT_SHA: Lazy<&'static str> = Lazy::new(|| {
        option_env!("VERGEN_GIT_SHA").unwrap_or("UNKNOWN")
    });

    format!("{SERVICE_NAME}/{VERSION} ({})", *GIT_SHA)
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn user_agent_contains_version_and_sha() {
        let ua = user_agent();
        assert!(ua.contains(VERSION));
        assert!(ua.contains(SERVICE_NAME));
    }

    #[test]
    fn kafka_brokers_env_override() {
        const TEST_VAL: &str = "foo:123,bar:456";

        // Setting env vars inside tests is safe as long as we do it before
        // the first access to the Lazy; hence we spawn a new thread.
        std::thread::spawn(|| {
            std::env::set_var("CHIRP_PULSE_KAFKA_BROKERS", TEST_VAL);
            // Force re-evaluation in this thread only.
            let brokers = std::env::var("CHIRP_PULSE_KAFKA_BROKERS").unwrap();
            assert_eq!(brokers, TEST_VAL);
        }).join().unwrap();
    }
}
```