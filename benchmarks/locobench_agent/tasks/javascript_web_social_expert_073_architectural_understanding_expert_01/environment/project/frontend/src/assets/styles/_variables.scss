/**
 *  PulseLearn Campus Hub – Global Design Tokens
 *  File: _variables.scss
 *
 *  This file centralises every design-token (colours, spacing, typography, 
 *  z-index, elevations, break-points, etc.) used in the front-end. 
 *  NEVER hard-code visual values inside components; instead, import this 
 *  file and reference the tokens or helper mixins defined here.
 *
 *  Using a single source of truth allows:
 *    – Seamless run-time theme switching (light / dark / high-contrast)
 *    – Fast design iteration
 *    – Reduced visual debt and consistent UI
 *    – Easier branding / white-labelling
 *
 *  ---------------------------------------------------------------------------
 *  Usage examples:
 *
 *  .card {
 *    background: $color-surface;
 *    @include elevation(md);
 *    padding: spacing(3);
 *
 *    @include media-up(md) {
 *      padding: spacing(4);
 *    }
 *  }
 *
 *  ---------------------------------------------------------------------------
 *  TABLE OF CONTENTS
 *  01. Color Palette
 *  02. Typography Scale
 *  03. Spacing Scale
 *  04. Breakpoints & Media Mixins
 *  05. Elevation (shadows)
 *  06. Z-Index Layers
 *  07. Utility Functions & Mixins
 *  ---------------------------------------------------------------------------
 */

// 01. Color Palette ----------------------------------------------------------

// Semantic colour names map to design-tokens
$color-map: (
  /* Brand */
  "brand-primary": #1d5cff,
  "brand-secondary": #ff7b00,
  "brand-tertiary": #24c4a6,

  /* Neutrals */
  "neutral-900": #0d0e12,
  "neutral-800": #1e2027,
  "neutral-700": #2f323b,
  "neutral-600": #585c6d,
  "neutral-500": #7a7f94,
  "neutral-400": #a3a8ba,
  "neutral-300": #cfd3e0,
  "neutral-200": #e7eaf2,
  "neutral-100": #f4f6fb,
  "neutral-050": #fafbff,

  /* Status */
  "success": #1db954,
  "info": #17a2b8,
  "warning": #ffb700,
  "danger": #ff4d4f,

  /* UI Surfaces */
  "surface": #ffffff,
  "surface-alt": #f9f9fb,
  "surface-inverse": #1e2027,

  /* Others */
  "link": #1d5cff,
  "focus-outline": #ffb700
);

// Expose top-level semantic colours
$color-brand-primary:   map-get($color-map, "brand-primary");
$color-brand-secondary: map-get($color-map, "brand-secondary");
$color-brand-tertiary:  map-get($color-map, "brand-tertiary");

$color-text-primary: map-get($color-map, "neutral-900");
$color-text-secondary: map-get($color-map, "neutral-600");
$color-text-inverse: #ffffff;

$color-surface:        map-get($color-map, "surface");
$color-surface-alt:    map-get($color-map, "surface-alt");
$color-surface-inverse:map-get($color-map, "surface-inverse");

$color-success: map-get($color-map, "success");
$color-info:    map-get($color-map, "info");
$color-warning: map-get($color-map, "warning");
$color-danger:  map-get($color-map, "danger");

$color-link: map-get($color-map, "link");
$color-focus-outline: map-get($color-map, "focus-outline");

// CSS Custom Properties for run-time theming
:root {
  @each $name, $value in $color-map {
    --#{$name}: #{$value};
  }
}

// Support for prefers-color-scheme (dark mode)
@media (prefers-color-scheme: dark) {
  :root {
    --surface: #15171d;
    --surface-alt: #1e2027;
    --surface-inverse: #fafbff;

    --text-primary: #f4f6fb;
    --text-secondary: #cfd3e0;
  }
}

// 02. Typography Scale -------------------------------------------------------

$font-family-base: 'Inter', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
$font-family-mono: 'Fira Code', 'Courier New', Courier, monospace;

// Type scale (Major third 1.25)
$font-size-map: (
  "xs": 0.64rem, // 10.24px
  "sm": 0.8rem,  // 12.8px
  "base": 1rem,  // 16px
  "lg": 1.25rem, // 20px
  "xl": 1.56rem, // 25px
  "2xl": 1.95rem,// 31.2px
  "3xl": 2.44rem,// 39.04px
  "4xl": 3.05rem // 48.8px
);

// 03. Spacing Scale ----------------------------------------------------------
// Spacing helper returns a multiple of 0.25rem (4px).
// e.g. spacing(3) → 1rem
$spacing-unit: 0.25rem;
@function spacing($factor) {
  @return $factor * $spacing-unit;
}

// 04. Breakpoints & Media Mixins --------------------------------------------

$breakpoints: (
  "xs": 0,        // Extra small devices (portrait phones)
  "sm": 480px,    // Small devices (landscape phones)
  "md": 768px,    // Medium devices (tablets)
  "lg": 992px,    // Large devices (desktops)
  "xl": 1200px,   // Extra large devices (large desktops)
  "xxl": 1440px
);

// Media up: include styles >= breakpoint
@mixin media-up($size) {
  $value: map-get($breakpoints, $size);

  @if $value == null {
    @error "media-up(): `#{$size}` is not a valid breakpoint.";
  }

  @media (min-width: $value) {
    @content;
  }
}

// Media down: include styles < next breakpoint
@mixin media-down($size) {
  $value: map-get($breakpoints, $size);

  @if $value == null {
    @error "media-down(): `#{$size}` is not a valid breakpoint.";
  }

  // Grab next breakpoint to target max-width
  $index: index(map-keys($breakpoints), $size);

  @if $index == null or $index == length($breakpoints) {
    // xs or last entry
    @media (max-width: $value - 0.02px) { // account for sub-pixel issues
      @content;
    }
  } @else {
    $next-key: nth(map-keys($breakpoints), $index + 1);
    $next-value: map-get($breakpoints, $next-key);

    @media (max-width: $next-value - 0.02px) {
      @content;
    }
  }
}

// 05. Elevation (Shadows) ----------------------------------------------------

$elevations: (
  "xs": 0 1px 2px rgba(0, 0, 0, 0.04),
  "sm": 0 1px 3px rgba(0, 0, 0, 0.08),
  "md": 0 4px 6px rgba(0, 0, 0, 0.10),
  "lg": 0 10px 15px rgba(0, 0, 0, 0.12),
  "xl": 0 20px 25px rgba(0, 0, 0, 0.16)
);

@mixin elevation($level) {
  $shadow: map-get($elevations, $level);

  @if $shadow == null {
    @error "elevation(): `#{$level}` is not a valid elevation.";
  }

  box-shadow: $shadow;
}

// 06. Z-Index Layers ---------------------------------------------------------

$zindex-map: (
  "base": 1,
  "dropdown": 1000,
  "sticky": 1020,
  "header": 1030,
  "backdrop": 1040,
  "modal": 1050,
  "popover": 1060,
  "tooltip": 1080
);

@function z($layer) {
  $value: map-get($zindex-map, $layer);

  @if $value == null {
    @error "z(): `#{$layer}` is not a recognised z-index layer.";
  }

  @return $value;
}

// 07. Utility Functions & Mixins ---------------------------------------------

// Font size helper – ensures scale integrity
@function font-size($step) {
  $value: map-get($font-size-map, $step);

  @if $value == null {
    @error "font-size(): `#{$step}` is not a valid type scale step.";
  }

  @return $value;
}

// Example utility mixin for fluid type (optional)
@mixin fluid-type($min-size, $max-size, $min-vw: 320px, $max-vw: 1440px) {
  font-size: $min-size;

  @media (min-width: $min-vw) {
    font-size: calc(#{$min-size} + (#{$max-size} - #{$min-size}) * ((100vw - #{$min-vw}) / (#{$max-vw} - #{$min-vw})));
  }

  @media (min-width: $max-vw) {
    font-size: $max-size;
  }
}

// Accessibility: Hide visually but keep for screen-readers
@mixin sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

// ---------------------------------------------------------------------------
// END design tokens file
// ---------------------------------------------------------------------------