{
  "info": {
    "name": "PulseLearn Campus Hub â€“ Core API",
    "_postman_id": "b3a7d073-45b3-4601-ae5a-18eb27bfe9ce",
    "description": "Postman collection documenting the core REST endpoints for the **PulseLearn Campus Hub** platform.  \n\nThis collection is aimed at developers integrating with the publicâ€“facing Campus Hub APIs, covering authentication, user management, event publishing, course workflow, and administrative metrics.\n\nUsage hints:\n1. Import the collection, create (or select) an environment, and add a `base_url` variable (e.g. `https://api.campus.pulselearn.io`).\n2. Run the `Auth â€º Login` request to bootstrap a session. The script will automatically persist an `auth_token` variable for subsequent calls.\n3. Use the Examples tab of each request to view canonical payloads and responses.\n\nAll sample bodies conform to the platformâ€™s versioned schema (`v2`). Errors are surfaced via conventional [Problem Details for HTTP APIs](https://datatracker.ietf.org/doc/html/rfc9457) objects.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "984e7e23-651e-42d4-b2d2-06a8cc7a1510"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "https://api.campus.pulselearn.io",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global preâ€“request hook executed for every request",
          "// Generate an idempotency key to make requests safe to retry",
          "const uuid = () => pm.variables.replaceIn('{{uuid}}');",
          "pm.request.headers.add({ key: 'Idempotency-Key', value: uuid() });",
          "",
          "// Attach Authorization header if it has not been explicitly overridden",
          "const token = pm.environment.get('auth_token');",
          "if (token && !pm.request.headers.has('Authorization')) {",
          "    pm.request.headers.add({ key: 'Authorization', value: `Bearer ${token}` });",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test hook â€“ surface rate-limit information for each request",
          "const rlRemaining = pm.response.headers.get('X-RateLimit-Remaining');",
          "const rlReset     = pm.response.headers.get('X-RateLimit-Reset');",
          "",
          "if (rlRemaining !== null) {",
          "    pm.test('ðŸª« User still within rate-limit budget', function () {",
          "        pm.expect(parseInt(rlRemaining, 10)).to.be.above(0);",
          "    });",
          "    pm.environment.set('rate_limit_remaining', rlRemaining);",
          "}",
          "",
          "if (rlReset !== null) {",
          "    pm.environment.set('rate_limit_reset', rlReset);",
          "}"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "Auth",
      "description": "Session bootstrap & lifecycle endpoints",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v2/auth/login",
              "host": ["{{base_url}}"],
              "path": ["v2", "auth", "login"]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"student.one@pulselearn.io\",\n  \"password\": \"P@ssw0rd!\"\n}"
            },
            "description": "Authenticate and receive a short-lived JWT along with a refresh token."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "",
                  "const data = pm.response.json();",
                  "pm.test('Token present in response', () => pm.expect(data).to.have.property('token'));",
                  "",
                  "// Persist token for subsequent requests",
                  "pm.environment.set('auth_token', data.token);",
                  "pm.environment.set('refresh_token', data.refreshToken);"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v2/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["v2", "auth", "refresh"]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
            },
            "description": "Exchange a refresh token for a new access token."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "",
                  "const data = pm.response.json();",
                  "pm.test('New token issued', () => pm.expect(data).to.have.property('token'));",
                  "",
                  "pm.environment.set('auth_token', data.token);"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v2/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["v2", "auth", "logout"]
            },
            "description": "Invalidate the current session and revoke tokens server-side."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 204', () => pm.response.to.have.status(204));",
                  "",
                  "// Clean up auth information",
                  "pm.environment.unset('auth_token');",
                  "pm.environment.unset('refresh_token');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Users",
      "description": "Endpoints to retrieve or mutate user state",
      "item": [
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v2/users/me",
              "host": ["{{base_url}}"],
              "path": ["v2", "users", "me"]
            },
            "description": "Fetch the authenticated user's profile, including roles and enrolments."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "pm.test('Response has user id', () => pm.expect(pm.response.json()).to.have.property('id'));"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Avatar",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v2/users/me/avatar",
              "host": ["{{base_url}}"],
              "path": ["v2", "users", "me", "avatar"]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "description": "Upload a profile picture for the current user."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', () => pm.response.to.have.status(201));"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Courses",
      "description": "Course lifecycle operations",
      "item": [
        {
          "name": "Create Course",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/v2/courses",
              "host": ["{{base_url}}"],
              "path": ["v2", "courses"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Advanced Reactive Systems\",\n  \"description\": \"Hands-on course exploring event-driven architectures.\",\n  \"visibility\": \"public\"\n}"
            },
            "description": "Create a new course. Requires teacher or admin privileges."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', () => pm.response.to.have.status(201));",
                  "pm.environment.set('course_id', pm.response.json().id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Publish Course",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/v2/courses/{{course_id}}/publish",
              "host": ["{{base_url}}"],
              "path": ["v2", "courses", "{{course_id}}", "publish"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "description": "Make the course visible to all enrolled students."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));"
                ]
              }
            }
          ]
        },
        {
          "name": "List Lectures",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/v2/courses/{{course_id}}/lectures?limit=20",
              "host": ["{{base_url}}"],
              "path": ["v2", "courses", "{{course_id}}", "lectures"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "description": "Retrieve paginated lecture list for the specified course."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "pm.test('Array of lectures returned', () => {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body.items).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Events",
      "description": "Domain event emission & queries",
      "item": [
        {
          "name": "Publish Domain Event",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/v2/events",
              "host": ["{{base_url}}"],
              "path": ["v2", "events"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"BadgeAwarded\",\n  \"payload\": {\n    \"userId\": \"{{user_id}}\",\n    \"badge\": \"fast-learner\",\n    \"courseId\": \"{{course_id}}\"\n  },\n  \"metadata\": {\n    \"stream\": \"user-{{user_id}}\",\n    \"timestamp\": \"{{$timestamp}}\"\n  }\n}"
            },
            "description": "Emit a domain event. The Event Gateway will forward to the Kafka/NATS backbone."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 202', () => pm.response.to.have.status(202));",
                  "pm.test('Location header present for event resource', () => {",
                  "   pm.expect(pm.response.headers.get('Location')).to.match(/\\/v2\\/events\\/[^/]+$/);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Query Event Stream",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/v2/events/stream/user-{{user_id}}?limit=50",
              "host": ["{{base_url}}"],
              "path": ["v2", "events", "stream", "user-{{user_id}}"],
              "query": [
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "description": "Fetch the latest 50 events for the given user stream."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "const events = pm.response.json().items;",
                  "pm.test('Events array integrity', () => pm.expect(events).to.be.an('array').that.is.not.empty);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin",
      "description": "Operations reserved for administrators",
      "item": [
        {
          "name": "Realtime Metrics",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/v2/admin/metrics/realtime",
              "host": ["{{base_url}}"],
              "path": ["v2", "admin", "metrics", "realtime"]
            },
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "description": "Retrieve live operational metrics aggregated from micro-services."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', () => pm.response.to.have.status(200));",
                  "",
                  "const body = pm.response.json();",
                  "pm.test('Metrics snapshot contains expected fields', () => {",
                  "    pm.expect(body).to.include.keys('uptime', 'activeUsers', 'eventsPerSecond');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}