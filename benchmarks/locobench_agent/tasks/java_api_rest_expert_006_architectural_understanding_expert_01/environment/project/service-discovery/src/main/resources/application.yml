```yaml
# ========================================================================
#  OpsForge Utility Nexus :: Service Discovery
#  Spring Boot configuration
#  ----------------------------------------------------------------------
#  This file follows Spring’s multi-profile YAML format. The first
#  document contains shared defaults; subsequent documents override
#  properties for individual profiles (e.g., "dev", "prod").
# ========================================================================

################################################################################
#                          Shared (any profile)                                #
################################################################################
spring:
  application:
    name: opsforge-service-discovery
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}   # If env-variable not set, fall back to “dev”
  main:
    banner-mode: "off"                      # Disable Spring banner for cleaner logs
  jackson:
    serialization:
      INDENT_OUTPUT: true                   # Pretty-print JSON where applicable
  cloud:
    discovery:
      client:
        composite-indicator:
          enabled: true                     # Aggregate discovery health indicators

server:
  port: ${SERVER_PORT:8080}
  forward-headers-strategy: framework       # Honors X-Forwarded-* headers for gateway/scoped deployments
  servlet:
    context-path: /                         # Uniform root context
  compression:
    enabled: true
    mime-types: >
      application/json,
      application/xml,
      text/html,
      text/xml,
      text/plain,
      application/graphql
    min-response-size: 2048                 # Compress responses larger than 2 KB

management:
  endpoint:
    health:
      show-details: when_authorized
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,env,metrics,loggers,configprops
  metrics:
    tags:
      application: ${spring.application.name}

# ------------------------------------------------------------------------------
#  Logging
# ------------------------------------------------------------------------------
logging:
  level:
    root: INFO                              # Default logging threshold
    com.opsforge: DEBUG                     # Library/application logs
  pattern:
    console: "%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} %highlight(%-5level) [%15.15thread] %-40.40logger{39} : %msg%n"

# ------------------------------------------------------------------------------
#  Eureka Service Discovery (acts as Eureka *server*)
# ------------------------------------------------------------------------------
eureka:
  client:
    register-with-eureka: false             # As server, don’t self-register
    fetch-registry: false
  server:
    wait-time-in-ms-when-sync-empty: 0
    enable-self-preservation: false

# ------------------------------------------------------------------------------
#  GraphQL (supports schema introspection and tooling)
# ------------------------------------------------------------------------------
graphql:
  servlet:
    mapping: /graphql                       # REST lives at “/”; GraphQL at “/graphql”
    corsEnabled: true
  tools:
    schemaLocationPattern: "**/*.graphqls"

# ------------------------------------------------------------------------------
#  Response Caching
# ------------------------------------------------------------------------------
spring:
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterAccess=600s   # 10-minute sliding window

# ------------------------------------------------------------------------------
#  API Versioning & Pagination Defaults
# ------------------------------------------------------------------------------
opsforge:
  versioning:
    default-version: v1
    header-name: X-API-Version
  paging:
    default-page-size: 50
    max-page-size: 1000
  error-handling:
    expose-internal-errors: false
  rate-limiting:
    limit-refresh-period: 1s
    limit-for-period: 500                    # Burst capacity before throttling

# ------------------------------------------------------------------------------
#  Resilience4j Rate Limiter (cross-cutting adapter)
# ------------------------------------------------------------------------------
resilience4j:
  ratelimiter:
    instances:
      global:
        limitForPeriod: ${opsforge.rate-limiting.limit-for-period}
        limitRefreshPeriod: ${opsforge.rate-limiting.limit-refresh-period}
        timeoutDuration: 0                   # Fail fast if limit exhausted

################################################################################
#                               Dev Profile                                    #
################################################################################
---
spring:
  config:
    activate:
      on-profile: dev

server:
  port: 8081                                 # Non-privileged port for local dev

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/

logging:
  level:
    root: DEBUG                              # Verbose logs for debugging

################################################################################
#                              Prod Profile                                    #
################################################################################
---
spring:
  config:
    activate:
      on-profile: prod

server:
  port: 80                                   # Reverse proxy / K8s NodePort

eureka:
  client:
    service-url:
      defaultZone: ${EUREKA_URL:http://eureka-cluster:8761/eureka/}

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus      # Reduce surface area in prod

logging:
  level:
    root: WARN                               # Quieter logs
  pattern:
    console: "%d{ISO8601} %-5level %logger{36} : %msg%n"

################################################################################
#                              Test Profile                                    #
################################################################################
---
spring:
  config:
    activate:
      on-profile: test

server:
  port: 0                                    # Auto-assign random port during tests

eureka:
  client:
    enabled: false                           # Disable Eureka interactions for integration tests
```