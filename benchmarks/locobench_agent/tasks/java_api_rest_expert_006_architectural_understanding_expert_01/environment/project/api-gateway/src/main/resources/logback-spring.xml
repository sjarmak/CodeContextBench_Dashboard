```xml
<?xml version="1.0" encoding="UTF-8"?>
<!--
    ==========================================================================================
      OpsForge Utility Nexus ▸ API-Gateway
      Logback configuration (Spring Boot aware)
      --------------------------------------------------
      • DEV profile  : Colorised console + rolling file
      • PROD profile : Async JSON (Logstash) + rolling file
      • Common       : Correlation-ID & Request-ID MDC fields,
                       protection against log spam, and sensible defaults
      • All values   : Can be overridden via environment variables
    ==========================================================================================
-->
<configuration scan="false" debug="false">

    <!-- ───────────────────────────────────────────────────────────────────────────────
         Property resolution
         ──────────────────────────────────────────────────────────────────────────── -->
    <springProperty scope="context" name="LOG_PATH"        source="LOG_PATH"        defaultValue="logs"/>
    <springProperty scope="context" name="LOG_ARCHIVE"     source="LOG_ARCHIVE"     defaultValue="${LOG_PATH}/archive"/>
    <springProperty scope="context" name="LOG_LEVEL_ROOT"  source="LOG_LEVEL_ROOT"  defaultValue="INFO"/>
    <springProperty scope="context" name="LOG_MAX_HISTORY" source="LOG_MAX_HISTORY" defaultValue="30"/>
    <springProperty scope="context" name="APP_NAME"        source="spring.application.name" defaultValue="opsforge-utility-nexus-api-gateway"/>
    <springProperty scope="context" name="INSTANCE_ID"     source="spring.application.instance-id" defaultValue="local"/>

    <!-- ───────────────────────────────────────────────────────────────────────────────
         Pattern definitions
         ──────────────────────────────────────────────────────────────────────────── -->
    <conversionRule conversionWord="clr"   converterClass="org.springframework.boot.logging.logback.ColorConverter"/>
    <conversionRule conversionWord="wex"   converterClass="org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter"/>
    <conversionRule conversionWord="wEx"   converterClass="org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter"/>

    <!-- Standard colourised pattern for local dev -->
    <property name="DEV_PATTERN"
              value="%d{yyyy-MM-dd HH:mm:ss.SSS} ${PID:- } [%thread] %-5level %highlight(%-40.40logger{39}) - %msg %n"/>

    <!-- ───────────────────────────────────────────────────────────────────────────────
         Appenders
         ──────────────────────────────────────────────────────────────────────────── -->

    <!-- ========== Console (colourised) – active in 'dev' profile ========= -->
    <springProfile name="dev">
        <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
            <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                <pattern>${DEV_PATTERN}</pattern>
                <charset>UTF-8</charset>
            </encoder>
        </appender>
    </springProfile>

    <!-- ========== JSON Console (Logstash) – active in 'prod' profile ===== -->
    <springProfile name="prod">
        <appender name="JSON_CONSOLE" class="net.logstash.logback.appender.LogstashConsoleAppender">
            <encoder class="net.logstash.logback.encoder.LogstashEncoder">
                <timeZone>UTC</timeZone>
                <includeMdcKeyName>correlationId</includeMdcKeyName>
                <includeMdcKeyName>requestId</includeMdcKeyName>
                <includeMdcKeyName>userId</includeMdcKeyName>
                <includeMdcKeyName>tenant</includeMdcKeyName>
                <fieldNames>
                    <timestamp>timestamp</timestamp>
                    <level>level</level>
                    <thread>thread</thread>
                    <logger>logger</logger>
                    <message>message</message>
                </fieldNames>
                <customFields>{"app":"${APP_NAME}","instance":"${INSTANCE_ID}"}</customFields>
            </encoder>
        </appender>
    </springProfile>

    <!-- ========== Rolling file (common to all profiles) =================== -->
    <appender name="FILE_CORE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/${APP_NAME}.log</file>

        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_ARCHIVE}/${APP_NAME}-%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>

            <!-- Rotate daily and whenever the file exceeds 100 MB -->
            <timeBasedFileNamingAndTriggeringPolicy
                    class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>

            <!-- Retention & total size cap -->
            <maxHistory>${LOG_MAX_HISTORY}</maxHistory>
            <totalSizeCap>2GB</totalSizeCap>
        </rollingPolicy>

        <!-- Use a performant encoder suitable for grep as well as humans -->
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} [%thread] %-5level %logger{36} - %msg%n</pattern>
            <charset>UTF-8</charset>
        </encoder>

        <!-- Guard against misbehaving loggers -->
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>DEBUG</level>
        </filter>
    </appender>

    <!-- We always wrap file + console appenders in an async buffer to avoid IO stalls -->
    <appender name="ASYNC_FILE" class="ch.qos.logback.classic.AsyncAppender">
        <queueSize>2048</queueSize>
        <discardingThreshold>0</discardingThreshold>
        <appender-ref ref="FILE_CORE"/>
    </appender>

    <springProfile name="dev">
        <appender name="ASYNC_CONSOLE" class="ch.qos.logback.classic.AsyncAppender">
            <queueSize>1024</queueSize>
            <appender-ref ref="CONSOLE"/>
        </appender>
    </springProfile>

    <springProfile name="prod">
        <appender name="ASYNC_CONSOLE" class="ch.qos.logback.classic.AsyncAppender">
            <queueSize>4096</queueSize>
            <appender-ref ref="JSON_CONSOLE"/>
        </appender>
    </springProfile>

    <!-- ───────────────────────────────────────────────────────────────────────────────
         Loggers
         ──────────────────────────────────────────────────────────────────────────── -->
    <!-- Reduce noise from Spring internals -->
    <logger name="org.springframework" level="INFO"/>
    <logger name="org.springframework.web" level="WARN"/>
    <logger name="org.hibernate" level="WARN"/>
    <logger name="com.zaxxer.hikari" level="WARN"/>

    <!-- Increase verbosity for our bounded context packages -->
    <logger name="io.opsforge.utilitynexus" level="DEBUG"/>

    <!-- Dedicated log level for security components -->
    <logger name="io.opsforge.utilitynexus.security" level="INFO"/>

    <!-- ───────────────────────────────────────────────────────────────────────────────
         Root logger
         ──────────────────────────────────────────────────────────────────────────── -->
    <root level="${LOG_LEVEL_ROOT}">
        <appender-ref ref="ASYNC_CONSOLE"/>
        <appender-ref ref="ASYNC_FILE"/>
    </root>

</configuration>
```