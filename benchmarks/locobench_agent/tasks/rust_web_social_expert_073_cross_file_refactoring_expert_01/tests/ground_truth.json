{
  "ground_truth": "The final state of the codebase should reflect the following key changes:\n\n*   **New File `src/event_publisher.txt`:**\n    *   This file must exist.\n    *   It must contain a `pub struct EventPublisher`.\n    *   It must contain a `pub enum EventPublisherError` with variants for serialization and transport errors.\n    *   It must contain an implementation of `EventPublisher` with a `pub fn new(...) -> Self` and a `pub async fn publish<T: serde::Serialize + Sync>(...) -> Result<(), EventPublisherError>`.\n    *   The `publish` method correctly serializes its generic `payload` argument and calls `utils::send_event_to_stream`.\n\n*   **Modified `src/module_15.txt`:**\n    *   The original, module-specific event publishing function has been deleted.\n    *   A `use crate::event_publisher::EventPublisher;` (and possibly `EventPublisherError`) statement is present.\n    *   Code that previously called the old function now instantiates `EventPublisher::new()` and calls the `.publish()` method.\n\n*   **Modified `src/module_48.txt`:**\n    *   Same changes as in `module_15.txt`, but relevant to its own specific event struct and call sites.\n\n*   **Modified `src/module_77.txt`:**\n    *   Same changes as in `module_15.txt`, but relevant to its own specific event struct and call sites.\n\n*   **No other files should be modified.** The changes must be confined to the four files mentioned in the task.",
  "context_files": [
    "src/module_76.txt",
    "src/module_52.txt",
    "src/module_32.txt",
    "src/module_41.txt",
    "src/module_30.txt",
    "tests/test_utils.txt",
    "src/module_26.txt",
    "src/module_28.txt",
    "src/module_69.txt",
    "src/utils.txt",
    "src/module_78.txt",
    "src/module_51.txt",
    "src/module_54.txt",
    "src/module_6.txt",
    "src/module_64.txt",
    "src/module_21.txt",
    "src/module_25.txt",
    "src/module_9.txt",
    "src/module_12.txt",
    "src/module_14.txt",
    "src/module_7.txt",
    "src/module_31.txt",
    "src/module_2.txt",
    "src/module_66.txt",
    "src/module_4.txt",
    "src/module_71.txt",
    "src/module_85.txt",
    "src/module_34.txt",
    "src/module_29.txt",
    "src/module_68.txt",
    "src/module_80.txt",
    "src/module_74.txt",
    "src/module_37.txt",
    "src/module_53.txt",
    "src/module_13.txt",
    "src/module_17.txt",
    "src/module_77.txt",
    "src/module_56.txt",
    "src/module_43.txt",
    "src/module_46.txt",
    "src/module_70.txt",
    "src/module_61.txt",
    "src/module_55.txt",
    "src/module_10.txt",
    "src/module_60.txt",
    "src/module_75.txt",
    "src/module_36.txt",
    "src/module_33.txt",
    "src/module_81.txt",
    "src/module_50.txt",
    "src/module_82.txt",
    "src/module_5.txt",
    "src/module_49.txt",
    "src/module_24.txt",
    "src/module_42.txt",
    "src/module_47.txt",
    "src/module_63.txt",
    "name",
    "src/module_72.txt",
    "src/module_15.txt",
    "tests/test_main.txt",
    "src/module_20.txt",
    "src/module_3.txt",
    "src/module_83.txt",
    "src/module_22.txt",
    "src/module_35.txt",
    "src/module_48.txt",
    "src/module_62.txt",
    "src/module_65.txt",
    "src/module_86.txt",
    "src/module_38.txt",
    "src/module_45.txt",
    "src/module_16.txt",
    "src/module_67.txt",
    "src/module_79.txt",
    "src/module_57.txt",
    "src/module_44.txt",
    "type",
    "src/module_84.txt",
    "children",
    "src/module_19.txt",
    "src/module_1.txt",
    "src/module_58.txt",
    "src/module_18.txt",
    "src/module_39.txt",
    "src/module_23.txt"
  ],
  "task_category": "cross_file_refactoring",
  "evaluation_criteria": [
    "**Correctness of Centralization:** Was the duplicated event publishing logic successfully consolidated into the new `src/event_publisher.txt` module?",
    "**Proper Use of Generics:** Is the new `publish` method correctly implemented using Rust generics (`<T: serde::Serialize>`) to handle different event data structures without code duplication?",
    "**Code Elimination:** Were the old, redundant publishing functions and their associated helper logic completely removed from `module_15`, `module_48`, and `module_77`?",
    "**Architectural Improvement:** Does the solution correctly use a struct (`EventPublisher`) to manage state and configuration, demonstrating an understanding of dependency management over static functions?",
    "**Dependency Resolution:** Are the necessary `use` statements correctly added to the refactored modules to import the new service?",
    "**Error Handling:** Is a new, unified `EventPublisherError` type created and used correctly in the `publish` method's return signature?",
    "**Surgical Precision:** Did the agent avoid making unnecessary or unrelated changes to the files or the broader codebase?"
  ]
}