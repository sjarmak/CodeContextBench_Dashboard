{
  "$schema": "https://ledgerquest.com/schemas/v1/ledgerquest-engine.production.json",
  "environment": "production",
  "version": "1.0.0",
  "aws": {
    "region": "us-east-1",
    "account_id": "123456789012",
    "s3_assets_bucket": "ledgerquest-prod-assets",
    "s3_logs_bucket": "ledgerquest-prod-logs",
    "dynamodb_tables": {
      "GameState": {
        "table_name": "LQ-Prod-GameState",
        "billing_mode": "PAY_PER_REQUEST",
        "ttl_enabled": true,
        "kms_key_id": "alias/ledgerquest-dynamodb"
      },
      "UserProfiles": {
        "table_name": "LQ-Prod-UserProfiles",
        "billing_mode": "PAY_PER_REQUEST",
        "ttl_enabled": false,
        "kms_key_id": "alias/ledgerquest-dynamodb"
      },
      "AuditTrail": {
        "table_name": "LQ-Prod-AuditTrail",
        "billing_mode": "PROVISIONED",
        "read_capacity": 5,
        "write_capacity": 5,
        "ttl_enabled": false,
        "stream_enabled": true,
        "kms_key_id": "alias/ledgerquest-dynamodb"
      }
    },
    "step_functions": {
      "GameLoopOrchestrator": "arn:aws:states:us-east-1:123456789012:stateMachine:LedgerQuest-Prod-GameLoop",
      "BillingOrchestrator": "arn:aws:states:us-east-1:123456789012:stateMachine:LedgerQuest-Prod-Billing"
    },
    "event_bridge": {
      "bus_arn": "arn:aws:events:us-east-1:123456789012:event-bus/ledgerquest-prod"
    },
    "kms": {
      "key_id": "arn:aws:kms:us-east-1:123456789012:key/abcd-efgh-ijkl",
      "use_encryption_by_default": true
    }
  },
  "networking": {
    "api_gateway": {
      "websocket_url": "wss://api.ledgerquest.com/prod",
      "rest_url": "https://api.ledgerquest.com/prod",
      "usage_plans": {
        "free": {
          "rate_limit_per_second": 5,
          "burst_limit": 10
        },
        "pro": {
          "rate_limit_per_second": 50,
          "burst_limit": 100
        }
      }
    }
  },
  "logging": {
    "level": "INFO",
    "structured": true,
    "retention_in_days": 30,
    "destination_cloudwatch_group": "/aws/ledgerquest/prod",
    "mask_secrets": true
  },
  "metrics": {
    "enabled": true,
    "service": "CloudWatch",
    "namespace": "LedgerQuest/Prod",
    "flush_interval_seconds": 60
  },
  "telemetry": {
    "enabled": true,
    "kinesis_firehose_stream": "ledgerquest-prod-telemetry",
    "batch_size": 50,
    "compression": "GZIP",
    "encryption": "KMS"
  },
  "security": {
    "csp_policy": "default-src 'self'; script-src 'self' 'unsafe-inline'; connect-src 'self' wss://api.ledgerquest.com",
    "cors_allow_origins": [
      "https://*.ledgerquest.com",
      "https://ledgerquest.com"
    ],
    "jwt": {
      "issuer": "https://auth.ledgerquest.com/",
      "audience": "ledgerquest-engine",
      "jwks_uri": "https://auth.ledgerquest.com/.well-known/jwks.json",
      "cache_ttl_seconds": 300
    }
  },
  "features": {
    "ai_behavior": {
      "enabled": true,
      "max_decision_depth": 7,
      "lambda_memory_mb": 2048,
      "lambda_timeout_seconds": 10
    },
    "physics_simulation": {
      "enabled": true,
      "backend": "aws-fargate",
      "task_definition": "ledgerquest-physics-prod",
      "cpu": 4096,
      "memory": 8192,
      "max_parallel_tasks": 20
    },
    "level_editor": {
      "enabled": false,
      "allowed_roles": [
        "admin",
        "designer"
      ]
    },
    "scripting_system": {
      "enabled": true,
      "runtime": "python3.11",
      "max_execution_seconds": 15,
      "cached_layers_s3_prefix": "runtime-layers/prod/",
      "allow_untrusted": false
    }
  },
  "multi_tenancy": {
    "mode": "isolate",
    "tenant_header": "X-Tenant-ID",
    "dynamodb_partition_key": "tenant_id",
    "s3_prefix_strategy": "hash",
    "cross_tenant_query_block": true
  },
  "runtime": {
    "lambda_default_memory": 1024,
    "lambda_max_concurrency": 100,
    "warm_pool": {
      "min_concurrency": 10,
      "max_concurrency": 50,
      "scale_in_cooldown_seconds": 120,
      "scale_out_cooldown_seconds": 30
    }
  },
  "rate_limiting": {
    "enabled": true,
    "rules": {
      "per_user_per_second": 20,
      "per_ip_per_minute": 100,
      "per_tenant_per_hour": 5000
    }
  },
  "data_retention": {
    "game_state_days": 90,
    "audit_logs_days": 365,
    "telemetry_days": 30
  },
  "health_checks": {
    "enabled": true,
    "dynamodb_read_capacity_threshold": 0.8,
    "lambda_error_rate_threshold": 0.1,
    "step_function_throttle_threshold": 0.2,
    "metrics_push_interval_seconds": 60
  },
  "build": {
    "commit_sha": "${GIT_SHA}",
    "build_id": "${BUILD_ID}",
    "timestamp": "${BUILD_TIMESTAMP}"
  }
}