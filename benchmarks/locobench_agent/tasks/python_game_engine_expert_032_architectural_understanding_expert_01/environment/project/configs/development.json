{
  "environment": "development",
  "version": "0.1.0",
  "_comment": "LedgerQuest Engine â€“ Development Environment Configuration",
  "aws": {
    "profile": "ledgerquest-dev",
    "region": "us-west-2",
    "account_id": "123456789012",
    "resource_prefix": "lq-dev",
    "endpoint_overrides": {
      "_comment": "Local emulation endpoints for offline development/testing",
      "dynamodb": "http://localhost:4566",
      "s3": "http://localhost:4566",
      "lambda": "http://localhost:4566",
      "stepfunctions": "http://localhost:4566",
      "eventbridge": "http://localhost:4566"
    }
  },
  "networking": {
    "_comment": "Websocket/API Gateway configuration for local dev",
    "api_gateway_websocket": {
      "url": "ws://localhost:3001/dev",
      "connection_timeout_ms": 10000,
      "ping_interval_ms": 30000
    },
    "http_api": {
      "url": "http://localhost:3000",
      "timeout_seconds": 30
    }
  },
  "dynamodb": {
    "tables": {
      "GameState": {
        "name": "lq-dev-game-state",
        "partition_key": "session_id",
        "sort_key": "entity_id",
        "billing_mode": "PAY_PER_REQUEST",
        "ttl_attribute": "expires_at",
        "stream": "NEW_AND_OLD_IMAGES"
      },
      "PlayerProfile": {
        "name": "lq-dev-player-profile",
        "partition_key": "player_id",
        "billing_mode": "PAY_PER_REQUEST",
        "global_secondary_indexes": {
          "email_index": {
            "partition_key": "email",
            "projection": "ALL"
          }
        }
      },
      "AuditLog": {
        "name": "lq-dev-audit-log",
        "partition_key": "log_id",
        "billing_mode": "PAY_PER_REQUEST"
      }
    }
  },
  "s3": {
    "asset_bucket": "lq-dev-game-assets",
    "savegame_bucket": "lq-dev-savegames",
    "log_bucket": "lq-dev-engine-logs"
  },
  "step_functions": {
    "_comment": "State machine ARNs will be injected by CDK/SAM at deploy time",
    "orchestrators": {
      "GameLoop": "arn:aws:states:us-west-2:123456789012:stateMachine:lq-dev-game-loop",
      "AssetPipeline": "arn:aws:states:us-west-2:123456789012:stateMachine:lq-dev-asset-pipeline"
    },
    "execution_options": {
      "game_loop": {
        "timeout_seconds": 900,
        "trace_header": "lq-trace-id",
        "log_level": "ALL"
      },
      "asset_pipeline": {
        "timeout_seconds": 300,
        "log_level": "ERROR"
      }
    }
  },
  "event_bridge": {
    "bus_name": "lq-dev-event-bus",
    "rules": {
      "HotReloadRule": {
        "pattern": {
          "source": ["ledgerquest.assets"],
          "detail-type": ["ASSET_UPDATED"]
        },
        "targets": ["lambda:AssetHotReloader"]
      }
    }
  },
  "lambda": {
    "layers": [
      "arn:aws:lambda:us-west-2:123456789012:layer:lq-shared-utils:1",
      "arn:aws:lambda:us-west-2:123456789012:layer:lq-pandas-lite:3"
    ],
    "memory_defaults_mb": {
      "cpu_bound": 512,
      "io_bound": 256,
      "gpu_warmup": 1024
    },
    "timeout_defaults_seconds": {
      "cpu_bound": 10,
      "io_bound": 30,
      "gpu_warmup": 120
    },
    "concurrency_limits": {
      "_comment": "Prevent runaway costs in development",
      "reserved_concurrent_executions": 10
    }
  },
  "ecs": {
    "_comment": "GPU-accelerated burst rendering tasks (Fargate)",
    "cluster_name": "lq-dev-render-cluster",
    "gpu_task_definition": "lq-dev-render-task:5",
    "subnets": ["subnet-abc123", "subnet-def456"],
    "security_groups": ["sg-0123456789abcdef0"],
    "task_defaults": {
      "cpu": 4096,
      "memory": 8192,
      "desired_count": 0,
      "max_count": 2
    }
  },
  "game_loop": {
    "tick_rate_hz": 30,
    "physics_delta_s": 0.033,
    "max_entities": 10000,
    "object_pool": {
      "initial_size": 500,
      "max_size": 2000
    },
    "ai": {
      "behaviour_tree_cache_size": 128,
      "pathfinding_refresh_ms": 500
    }
  },
  "logging": {
    "level": "DEBUG",
    "format": "[%(levelname)s] %(asctime)s %(name)s - %(message)s",
    "retention_days": 7,
    "include_correlation_ids": true
  },
  "metrics": {
    "provider": "aws_embedded_metrics",
    "namespace": "LedgerQuestDev",
    "flush_interval_seconds": 15
  },
  "feature_flags": {
    "_comment": "Toggles to enable/disable experimental functionality during development",
    "enable_new_ai_planner": false,
    "enable_physics_v2": true,
    "enable_grpc_asset_streaming": false,
    "enable_hot_reloading": true
  },
  "security": {
    "cognito": {
      "user_pool_id": "us-west-2_aaaaaaaaa",
      "app_client_id": "1h57kf5shb3sdphjskg4lp8qlb"
    },
    "jwt": {
      "issuer": "https://cognito-idp.us-west-2.amazonaws.com/us-west-2_aaaaaaaaa",
      "audience": "ledgerquest-dev",
      "jwks_uri": "https://cognito-idp.us-west-2.amazonaws.com/us-west-2_aaaaaaaaa/.well-known/jwks.json"
    },
    "cors": {
      "allowed_origins": ["http://localhost:8080"],
      "allowed_methods": ["GET", "POST", "PUT", "DELETE"],
      "allowed_headers": ["Content-Type", "Authorization", "X-Request-Id"],
      "allow_credentials": true
    }
  },
  "rate_limiting": {
    "enabled": true,
    "burst_limit": 20,
    "rate_limit_per_minute": 60,
    "storage_mode": "memory"
  },
  "debug": {
    "_comment": "Developer convenience settings. DO NOT USE IN PRODUCTION.",
    "simulate_latency_ms": 50,
    "force_ai_seed": 42,
    "enable_profiler": false
  }
}