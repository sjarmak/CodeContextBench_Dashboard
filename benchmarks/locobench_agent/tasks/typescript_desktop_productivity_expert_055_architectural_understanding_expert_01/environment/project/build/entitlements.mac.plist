```typescript
/**
 * PaletteFlow Studio – Build Tooling
 * ----------------------------------
 * This file is intentionally named “entitlements.mac.plist” because the build
 * pipeline expects an artefact with that name.  However, instead of checking‐in
 * a static XML property-list we generate it at build-time to keep the list of
 * entitlements in sync with feature flags (`auto_updates`, `crash_reporting`,
 * etc.).  The output of this module is written to   build/entitlements.mac.plist
 * right before the Electron-Builder step kicks in.
 *
 * Usage (npm script):
 *    "build:mac:pre": "ts-node build/entitlements.mac.plist"
 */

import { writeFileSync } from 'node:fs';
import { join, dirname } from 'node:path';
import { fileURLToPath } from 'node:url';
import { EOL } from 'node:os';
import * as plist from 'plist';

// ---------------------------------------------------------------------------
// Types
// ---------------------------------------------------------------------------

/**
 * Feature flags relevant to entitlements.  These come from the project’s
 * central configuration / environment but are hard-coded here for brevity.
 */
type FeatureFlag =
  | 'auto_updates'
  | 'crash_reporting'
  | 'settings_configuration'
  | 'plugin_system'
  | 'multi_window';

/**
 * An object describing the build features that are currently enabled.
 */
interface BuildContext {
  readonly enabledFeatures: ReadonlyArray<FeatureFlag>;
  /** Absolute path where the final plist file will be written. */
  readonly destination: string;
}

// ---------------------------------------------------------------------------
// Constants
// ---------------------------------------------------------------------------

/**
 * Default entitlements that are always required for a sandboxed Electron app.
 */
const BASE_ENTITLEMENTS: Record<string, boolean> = {
  'com.apple.security.app-sandbox': true,
  'com.apple.security.inherit': true,
  'com.apple.security.files.user-selected.read-only': true,
  // Electron needs JIT for the V8 engine.
  'com.apple.security.cs.allow-jit': true,
  // Allow reading files dropped on the dock icon.
  'com.apple.security.files.bookmarks.app-scope': true,
};

/**
 * Feature-specific entitlement fragments.  These are merged conditionally
 * based on `BuildContext.enabledFeatures`.
 */
const FEATURE_ENTITLEMENTS: Record<FeatureFlag, Record<string, boolean>> = {
  auto_updates: {
    // Required so the auto-updater can check the server and download payloads.
    'com.apple.security.network.client': true,
    'com.apple.security.network.server': true,
  },
  crash_reporting: {
    // Allow outgoing connections to send crash dumps.
    'com.apple.security.network.client': true,
    // Needed for native crash reporter to write minidumps.
    'com.apple.security.exception.files.home-relative-path': true,
  },
  settings_configuration: {
    // Access to user defaults.
    'com.apple.security.personal-information.location': false, // explicitly disallowed
  },
  plugin_system: {
    // Permit loading external native modules bundled as plugins.
    'com.apple.security.cs.disable-library-validation': true,
    'com.apple.security.cs.allow-unsigned-executable-memory': true,
  },
  multi_window: {
    // No extra entitlements required but here for completeness.
  },
};

// ---------------------------------------------------------------------------
// Implementation
// ---------------------------------------------------------------------------

/**
 * Merges base + feature-specific entitlements into a single record.
 */
function compileEntitlements(ctx: BuildContext): Record<string, boolean> {
  const combined = { ...BASE_ENTITLEMENTS };

  for (const feature of ctx.enabledFeatures) {
    const fragment = FEATURE_ENTITLEMENTS[feature];
    Object.assign(combined, fragment);
  }

  // Safety checks – warn about mutually exclusive entitlements.
  if (combined['com.apple.security.cs.disable-library-validation'] &&
      !ctx.enabledFeatures.includes('plugin_system')) {
    console.warn(
      '[entitlements] Library validation is disabled but plugin_system feature ' +
        'is not enabled.  This could be a security risk.',
    );
  }

  return combined;
}

/**
 * Generates the XML property list string that Electron-Builder understands.
 */
function buildPlistXml(entitlements: Record<string, boolean>): string {
  // The CFBundleIdentifier is irrelevant for entitlements, but Electron-Builder
  // will inject its own identifier later anyway, so we omit it here.
  const xml = plist.build(entitlements);

  // Electron-Builder requires the file to end with a newline.
  return xml.endsWith(EOL) ? xml : xml + EOL;
}

/**
 * Resolves the path to where the entitlements file should be written.
 *
 * @example
 *   /Users/alice/paletteflow/build/entitlements.mac.plist
 */
function resolveDestination(): string {
  const __dirname = dirname(fileURLToPath(import.meta.url));
  return join(__dirname, 'entitlements.mac.plist');
}

/**
 * Writes the entitlements plist to disk, creating parent directories if needed.
 */
function writeEntitlements(destination: string, xml: string): void {
  try {
    writeFileSync(destination, xml, { encoding: 'utf8' });
    console.info(`[entitlements] Wrote macOS entitlements to ${destination}`);
  } catch (error) {
    console.error(
      `[entitlements] Failed to write entitlements: ${(error as Error).message}`,
    );
    process.exitCode = 1;
  }
}

// ---------------------------------------------------------------------------
// Entrypoint
// ---------------------------------------------------------------------------

/**
 * A real build pipeline would read feature flags from a config file or
 * environment variables.  For this example we simply enable all features that
 * the product description lists.
 */
const ctx: BuildContext = {
  enabledFeatures: [
    'auto_updates',
    'crash_reporting',
    'settings_configuration',
    'plugin_system',
    'multi_window',
  ],
  destination: resolveDestination(),
};

const entitlements = compileEntitlements(ctx);
const xml = buildPlistXml(entitlements);

writeEntitlements(ctx.destination, xml);
```