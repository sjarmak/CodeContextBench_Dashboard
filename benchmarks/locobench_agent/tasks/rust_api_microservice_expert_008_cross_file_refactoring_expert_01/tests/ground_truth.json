{
  "ground_truth": "The expected solution involves several key changes across the codebase:\n\n1.  **New File Creation:** A new file `src/error.rs` is created.\n\n2.  **Content of `src/error.rs`:**\n    ```rust\n    // src/error.rs\n    use axum::{\n        http::StatusCode,\n        response::{IntoResponse, Response},\n        Json,\n    };\n    use serde_json::json;\n    use thiserror::Error;\n\n    #[derive(Error, Debug)]\n    pub enum AppError {\n        #[error(\"invalid input: {0}\")]\n        ValidationError(String),\n\n        #[error(\"resource not found: {0}\")]\n        NotFound(String),\n\n        #[error(\"an internal server error occurred\")]\n        InternalServerError(#[from] anyhow::Error),\n\n        #[error(\"database query failed\")]\n        DatabaseQuery(#[from] sqlx::Error),\n\n        #[error(\"failed to access cache\")]\n        Cache(#[from] redis::RedisError),\n\n        #[error(\"unauthorized access\")]\n        Unauthorized,\n    }\n\n    impl IntoResponse for AppError {\n        fn into_response(self) -> Response {\n            let (status, error_type, error_message) = match self {\n                AppError::ValidationError(msg) => (StatusCode::BAD_REQUEST, \"validation\", msg),\n                AppError::NotFound(msg) => (StatusCode::NOT_FOUND, \"not_found\", msg),\n                AppError::Unauthorized => (StatusCode::UNAUTHORIZED, \"unauthorized\", \"Authentication required\".to_string()),\n                AppError::DatabaseQuery(e) => (StatusCode::INTERNAL_SERVER_ERROR, \"database_error\", e.to_string()),\n                AppError::Cache(e) => (StatusCode::INTERNAL_SERVER_ERROR, \"cache_error\", e.to_string()),\n                AppError::InternalServerError(e) => (StatusCode::INTERNAL_SERVER_ERROR, \"internal_error\", e.to_string()),\n            };\n\n            let body = Json(json!({\n                \"error\": {\n                    \"type\": error_type,\n                    \"message\": error_message,\n                }\n            }));\n\n            (status, body).into_response()\n        }\n    }\n    ```\n\n3.  **Modifications in `src/module_*.txt` files:**\n    -   **Before:** `pub async fn get_item(id: Uuid) -> Result<Item, String> { ... Err(\"not found\".to_string()) }`\n    -   **After:** `use crate::error::AppError; ... pub async fn get_item(id: Uuid) -> Result<Item, AppError> { ... Err(AppError::NotFound(\"Item not found\".to_string())) }`\n\n    -   **Before:** `pub fn process_data(data: &Data) -> Result<(), anyhow::Error> { ... let result = some_fallible_op()?; ... }`\n    -   **After:** `use crate::error::AppError; ... pub fn process_data(data: &Data) -> Result<(), AppError> { ... let result = some_fallible_op()?; ... }` (The `?` operator works because of the `From` impls).\n\n4.  **File-level changes:** Dozens of files in `src/` will have their function signatures updated and `use crate::error::AppError;` added. Old error types like `struct Module43Error;` will be deleted.",
  "context_files": [
    "src/module_45.txt",
    "src/module_30.txt",
    "src/module_69.txt",
    "src/module_39.txt",
    "src/module_41.txt",
    "src/module_29.txt",
    "src/module_8.txt",
    "src/module_21.txt",
    "src/module_62.txt",
    "src/module_76.txt",
    "src/module_46.txt",
    "src/module_58.txt",
    "src/module_50.txt",
    "src/module_59.txt",
    "src/module_10.txt",
    "src/module_13.txt",
    "src/module_17.txt",
    "src/module_24.txt",
    "src/module_65.txt",
    "src/module_32.txt",
    "src/module_49.txt",
    "src/module_68.txt",
    "src/module_12.txt",
    "src/module_2.txt",
    "src/module_43.txt",
    "src/module_18.txt",
    "src/module_55.txt",
    "src/module_56.txt",
    "src/module_75.txt",
    "src/module_37.txt",
    "src/module_38.txt",
    "src/module_64.txt",
    "src/module_67.txt",
    "src/utils.txt",
    "src/module_72.txt",
    "src/module_27.txt",
    "src/module_23.txt",
    "src/module_42.txt",
    "src/module_53.txt",
    "src/module_1.txt",
    "src/module_47.txt",
    "src/module_85.txt",
    "src/module_3.txt",
    "src/module_20.txt",
    "src/module_73.txt",
    "src/module_80.txt",
    "src/module_51.txt",
    "src/module_36.txt",
    "src/module_77.txt",
    "src/module_22.txt",
    "src/module_35.txt",
    "src/module_61.txt",
    "src/module_26.txt",
    "src/module_54.txt",
    "src/module_84.txt",
    "src/module_57.txt",
    "tests/test_utils.txt",
    "src/module_11.txt",
    "src/module_5.txt",
    "src/module_52.txt",
    "src/module_48.txt",
    "src/module_44.txt",
    "src/module_60.txt",
    "src/module_81.txt",
    "src/module_7.txt",
    "src/module_14.txt",
    "src/module_78.txt",
    "src/module_40.txt",
    "src/module_19.txt",
    "src/module_79.txt",
    "src/module_66.txt",
    "src/module_4.txt",
    "src/module_74.txt",
    "name",
    "src/module_28.txt",
    "src/module_71.txt",
    "src/module_9.txt",
    "type",
    "src/module_34.txt",
    "children",
    "src/module_33.txt",
    "src/module_63.txt"
  ],
  "task_category": "cross_file_refactoring",
  "evaluation_criteria": [
    "**Correctness of Implementation:** The agent must correctly create the `AppError` enum and implement the required traits (`Error`, `Display`, `Debug`, `IntoResponse`, `From`).",
    "**Completeness of Refactoring:** The agent should identify and refactor a vast majority of the disparate error handling sites across all provided modules.",
    "**Cross-File Consistency:** The new error handling pattern (`-> Result<T, AppError>`, `Err(AppError::Variant(...))`) must be applied uniformly across all modified files.",
    "**Code Centralization:** All new, shared error logic must be correctly placed in the new `src/error.rs` file, and old, redundant error types must be removed.",
    "**Idiomatic Rust:** The solution should use standard Rust idioms, such as leveraging `thiserror` and `From` traits to make the code clean and maintainable.",
    "**Non-Destructive Refactoring:** The agent must only change the error handling logic. Core business logic within the functions should remain untouched.",
    "**Test Awareness:** The agent should demonstrate an understanding of how the changes would impact the testing suite by describing the necessary updates to `tests/test_utils.txt`."
  ]
}