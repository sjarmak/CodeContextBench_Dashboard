```html
﻿<!DOCTYPE html>
<html lang="en">

<head>
    <!--
        CanvasCraft ML Studio – Interactive Front-End
        This host page boots the Blazor WebAssembly client that drives the
        reactive dashboards and 3-D visualisations.  Keep any heavy-weight
        JavaScript dependencies isolated in /js/vendor to leverage browser
        caching.  Versioned cache-busting is handled automatically by the
        ASP.NET Core Static Files middleware when <environment> tags are used
        in a Razor host page.  Because this is a pure static host file that
        lives in wwwroot, we rely on explicit hash-based file names instead.
    -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

    <!-- Search / Social / PWA -->
    <title>CanvasCraft ML Studio</title>
    <meta name="description"
          content="CanvasCraft ML Studio — Compose, repaint, and remix datasets & models like layers on a digital canvas." />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" type="image/png" href="img/icons/icon-192.png" sizes="192x192" />
    <meta name="theme-color" content="#0f172a" />
    <meta property="og:title" content="CanvasCraft ML Studio" />
    <meta property="og:description"
          content="An MVC-driven machine-learning suite for creative professionals." />
    <meta property="og:image" content="img/social/social-card.png" />

    <!-- Styles -->
    <link href="css/reset.min.css" rel="stylesheet" />
    <link href="css/app.min.css" rel="stylesheet" />

    <!-- Fonts (self-hosted for privacy/compliance) -->
    <link rel="preload" href="fonts/Inter-Variable.woff2" as="font" type="font/woff2"
          crossorigin="anonymous" />

    <script>
        /* -------------------------------------------------------------
         *  Global error boundary for *client-side* run-time exceptions.
         *  Uncaught exceptions are POSTed to the server-side telemetry
         *  endpoint so that they can be unified with server logs in the
         *  centralized experiment-tracking backend.
         * ----------------------------------------------------------- */
        window.addEventListener('error', onGlobalError, true);
        window.addEventListener('unhandledrejection', onGlobalPromiseRejection, true);

        function onGlobalError(event) {
            reportClientLog({
                level: 'Error',
                type: 'UnhandledException',
                message: event.message,
                stack: event.error?.stack ?? 'n/a',
                source: event.filename,
                line: event.lineno,
                column: event.colno
            });
        }

        function onGlobalPromiseRejection(event) {
            reportClientLog({
                level: 'Error',
                type: 'UnhandledRejection',
                message: event.reason?.message ?? event.reason,
                stack: event.reason?.stack ?? 'n/a'
            });
        }

        async function reportClientLog(payload) {
            try {
                await fetch('/api/telemetry/client', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload),
                    keepalive: true               // allow reporting during navigate/close
                });
            } catch (err) {
                /* Swallow to avoid recursive error loop */
                console.debug('Telemetry endpoint unreachable.', err);
            }
        }
    </script>
</head>

<body class="bg-slate-950 text-slate-50 font-inter antialiased">
    <header id="main-nav" class="sticky top-0 z-40 backdrop-blur shadow-lg">
        <nav class="container mx-auto flex items-center justify-between py-3 px-4">
            <a href="/" class="flex items-center gap-2 text-xl font-semibold tracking-wide">
                <img src="img/logo/logo-icon.svg" alt="CanvasCraft Logo" width="28" height="28" />
                CanvasCraft<span class="hidden sm:inline"> ML Studio</span>
            </a>
            <div class="flex items-center gap-6 text-sm">
                <a href="/docs" class="nav-link">Docs</a>
                <a href="/api" class="nav-link">API</a>
                <a href="/gallery" class="nav-link">Gallery</a>
                <button id="themeToggle" aria-label="Toggle dark/light"
                        class="w-10 h-10 flex items-center justify-center rounded hover:bg-slate-800/60">
                    <svg id="themeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round" class="feather feather-moon">
                        <path
                            d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">
                        </path>
                    </svg>
                </button>
            </div>
        </nav>
    </header>

    <!--
        App root – Blazor will hydrate this container with the shell layout.
    -->
    <div id="app" class="isolate"></div>

    <!--
        Fallback UI – displayed only if Blazor fails to load or times out.
    -->
    <noscript>
        <section class="container mx-auto mt-20 text-center">
            <h1 class="text-2xl font-bold">CanvasCraft requires JavaScript</h1>
            <p class="mt-4 text-base text-slate-400">
                This application uses WebAssembly & real-time visualisations.
                Please enable JavaScript to continue.
            </p>
        </section>
    </noscript>

    <!--
        Optional: pre-rendered loading shim.  Avoid heavy animations to reduce
        battery drain on mobile devices.  The spinner is removed automatically
        when the Blazor runtime finishes initialisation.
    -->
    <div id="skeletonLoader"
         class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
        <img src="img/logo/logo-mark.svg" width="48" height="48" alt="CanvasCraft logo"
             class="animate-pulse" />
        <p class="mt-6 text-sm text-slate-400">Warming up creative engines…</p>
    </div>

    <!-- Vendor bundle – kept small; heavier libs are lazy-loaded by Blazor. -->
    <script src="js/vendor/signalr.min.js" defer></script>

    <!--
        Blazor WebAssembly boot script.  The *_framework* folder is generated
        by the .NET publish pipeline.  cache-bust query-string is added by
        the MSBuild target ComputeFileHash.
    -->
    <script src="_framework/blazor.webassembly.js" autostart="false" defer></script>

    <script type="module">
        /**********************************************************************
         * Bootstrap Sequence
         *********************************************************************/

        import { HubConnectionBuilder, LogLevel } from '/js/vendor/signalr.min.js';

        document.addEventListener('DOMContentLoaded', async () => {
            registerThemeToggle();
            registerServiceWorker();
            configureRealtimeTelemetry();
            await startBlazor();
        });

        /* ---------------------------------------------
         *  Start Blazor WebAssembly
         * ------------------------------------------- */
        async function startBlazor() {
            try {
                await Blazor.start({
                    loadBootResource: (type, name, defaultUri, integrity) => {
                        // <--- Custom resource loading (e.g. a CDN) goes here
                        return defaultUri;
                    },
                    errorHandler: err => {
                        console.error('Blazor fatal error', err);
                        showBlazorErrorUi(err);
                    }
                });
            } catch (err) {
                console.error('Blazor failed to initialize', err);
                showBlazorErrorUi(err);
            } finally {
                document.getElementById('skeletonLoader')?.remove();
            }
        }

        function showBlazorErrorUi(err) {
            const ui = document.createElement('div');
            ui.id = 'blazor-error-ui';
            ui.className =
                'fixed inset-0 bg-red-900/80 flex flex-col items-center justify-center text-white';
            ui.innerHTML = `
                <h2 class="text-xl font-semibold mb-2">Something went wrong</h2>
                <pre class="text-xs max-w-lg overflow-x-auto whitespace-pre-wrap px-4">${err}</pre>
                <button id="reloadApp" class="mt-4 px-4 py-2 bg-white text-red-900 rounded">
                    Reload
                </button>`;
            document.body.appendChild(ui);
            document.getElementById('reloadApp').addEventListener('click', () => location.reload());
        }

        /* ---------------------------------------------
         *  Service Worker (PWA Offline Capability)
         * ------------------------------------------- */
        async function registerServiceWorker() {
            if (!('serviceWorker' in navigator)) return;
            try {
                await navigator.serviceWorker.register('/service-worker.js');
            } catch (err) {
                console.debug('SW registration failed', err);
            }
        }

        /* ---------------------------------------------
         *  Theme Toggle (Dark / Light)
         * ------------------------------------------- */
        function registerThemeToggle() {
            const btn = document.getElementById('themeToggle');
            const icon = document.getElementById('themeIcon');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const stored = localStorage.getItem('colorTheme');
            const isDark = stored ? stored === 'dark' : prefersDark;

            setTheme(isDark);

            btn.addEventListener('click', () => {
                setTheme(!document.documentElement.classList.contains('dark'));
            });

            function setTheme(dark) {
                document.documentElement.classList.toggle('dark', dark);
                localStorage.setItem('colorTheme', dark ? 'dark' : 'light');
                icon.setAttribute(
                    'class',
                    dark ? 'feather feather-sun' : 'feather feather-moon'
                );
            }
        }

        /* ---------------------------------------------
         *  SignalR – real-time notifications
         * ------------------------------------------- */
        function configureRealtimeTelemetry() {
            const connection = new HubConnectionBuilder()
                .withUrl('/hubs/experiment-events')
                .configureLogging(LogLevel.Information)
                .withAutomaticReconnect({ nextRetryDelayInMilliseconds: () => 5000 })
                .build();

            connection.on('ExperimentMetricUpdate', payload => {
                // Dispatch to Blazor through JS interop
                DotNet.invokeMethodAsync('CanvasCraft.Client', 'ReceiveMetricUpdate', payload);
            });

            connection.on('ModelDriftDetected', payload => {
                showToast(`Model drift detected in <b>${payload.modelName}</b>.`, 'warning');
            });

            connection.onreconnecting(err => {
                console.debug('Reconnecting to SignalR hub…', err);
            });

            connection.onclose(err => {
                if (err) console.error('SignalR hub closed.', err);
            });

            connection.start().catch(err => console.error('SignalR failed to start', err));
        }

        /* ---------------------------------------------
         *  Toaster
         * ------------------------------------------- */
        function showToast(message, level = 'info', timeout = 8000) {
            const wrapper = document.getElementById('toast-wrapper')
                || createToastWrapper();
            const toast = document.createElement('div');

            toast.className =
                `toast toast-${level} shadow-lg ring-1 ring-black/10 backdrop-blur`;
            toast.innerHTML = `
                <div class="px-4 py-2">${message}</div>
                <button class="ml-2 mr-2 text-lg leading-none select-none">&times;</button>`;

            wrapper.appendChild(toast);

            const close = () => toast.remove();
            toast.querySelector('button').addEventListener('click', close);
            setTimeout(close, timeout);
        }

        function createToastWrapper() {
            const wrapper = document.createElement('div');
            wrapper.id = 'toast-wrapper';
            wrapper.className = 'fixed bottom-4 right-4 flex flex-col gap-2 z-50';
            document.body.appendChild(wrapper);
            return wrapper;
        }
    </script>
</body>

</html>
```