{
  "$schema": "https://json.schemastore.org/appsettings.json",
  "Application": {
    "Name": "CanvasCraft ML Studio",
    "Environment": "Development",               // Overridden by ASPNETCORE_ENVIRONMENT
    "Version": "1.3.0"
  },

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "System": "Warning",
      "CanvasCraft": "Debug"                    // Verbose logging for domain code
    },
    "Seq": {
      "Url": "http://localhost:5341",
      "ApiKey": ""
    },
    "Console": {
      "DisableColors": false
    }
  },

  "Telemetry": {
    "ApplicationInsights": {
      "InstrumentationKey": "00000000-0000-0000-0000-000000000000",
      "EnableAdaptiveSampling": true
    }
  },

  "ConnectionStrings": {
    "SqlPrimary": "Server=localhost;Database=CanvasCraftDb;User Id=CanvasCraft;Password=YourStrongPassword;Encrypt=False",
    "Redis": "localhost:6379,allowAdmin=true",
    "RabbitMQ": "amqp://guest:guest@localhost:5672/",
    "MinIO": {
      "Endpoint": "http://127.0.0.1:9000",
      "AccessKey": "minio",
      "SecretKey": "minio123",
      "Bucket": "canvascraft"
    }
  },

  "Authentication": {
    "JwtBearer": {
      "Authority": "https://localhost:5001",
      "Audience": "canvascraft_api",
      "RequireHttpsMetadata": true
    }
  },

  "FeatureManagement": {
    "experiment_tracking": true,
    "feature_engineering": true,
    "feature_store": true,
    "hyperparameter_tuning": true,
    "model_training": true
  },

  "MLOps": {
    "Pipeline": {
      "DefaultStrategy": "QuickIteration",
      "Strategies": {
        "QuickIteration": {
          "Description": "Fast feedback for creative exploration",
          "MaxEpochs": 5,
          "EarlyStoppingPatience": 2
        },
        "ProductionHardening": {
          "Description": "Long-running, resource-intensive training for production",
          "MaxEpochs": 100,
          "EarlyStoppingPatience": 10
        }
      },
      "Factory": {
        "PreprocessingBrush": "StandardScaler",
        "FeatureEngineeringPalette": "ArtisticBlendV2",
        "HyperparameterTuningWheel": "Optuna"
      }
    },
    "ModelRegistry": {
      "Provider": "Sql",
      "ModelTable": "dbo.ModelRegistry",
      "CheckpointRetentionLimit": 20
    },
    "Observer": {
      "ModelPerformanceDriftThreshold": 0.05,
      "AlertChannel": "slack",
      "Slack": {
        "WebhookUrl": "https://hooks.slack.com/services/XXXXXXXXX/XXXXXXXXX/XXXXXXXXXXXXXXXXXXXX"
      }
    }
  },

  "Storage": {
    "LocalRoot": "C:\\CanvasCraft\\Artifacts",
    "RetentionDays": 90
  },

  "ModelServing": {
    "Enabled": true,
    "InferenceContainer": {
      "Image": "canvascraft/serving:latest",
      "Port": 8080,
      "HealthEndpoint": "/healthz"
    },
    "RealtimeAnnotation": {
      "EnableUserFeedbackLoop": true,
      "MaxSamplesPerUserSession": 50
    }
  },

  "ExperimentTracking": {
    "DefaultWorkspace": "main",
    "AutoRegisterMetrics": true,
    "SupportedBackends": [ "Sql", "MLflow" ],
    "SqlBackend": {
      "Schema": "tracking",
      "ArtifactTable": "Artifacts",
      "MetricTable": "Metrics",
      "ParameterTable": "Parameters"
    }
  },

  "Scheduler": {
    "Quartz": {
      "cron_cleanup_stale_artifacts": "0 0 2 * * ?",
      "cron_retrain_when_drift_detected": "0 0/30 * * * ?"
    }
  },

  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.Seq" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "Seq",
        "Args": {
          "serverUrl": "http://localhost:5341"
        }
      }
    ]
  },

  "AllowedHosts": "*"
}