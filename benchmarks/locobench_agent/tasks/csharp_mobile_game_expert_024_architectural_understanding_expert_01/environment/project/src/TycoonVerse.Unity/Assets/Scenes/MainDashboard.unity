```csharp
// --------------------------------------------------------------------------------------------------------------------
// <auto-generated>
//   This file belongs to the “TycoonVerse: Enterprise Empire Simulator” project.
//
//   Scene-specific bootstrapper and controller logic for the MainDashboard.unity scene.
//   Because Unity’s YAML-formatted *.unity files are not human-maintainable, we store the
//   scene’s C# bootstrapper here and let Unity reference this MonoBehaviour on the scene’s
//   root object.
//
//   Author: TycoonVerse Engineering Team
//   Copyright (c) 2024
// </auto-generated>
// --------------------------------------------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;
using TMPro;
using TycoonVerse.Infrastructure.Analytics;
using TycoonVerse.Infrastructure.Persistence;
using TycoonVerse.Infrastructure.Persistence.Repositories;
using TycoonVerse.Runtime.Eventing;
using TycoonVerse.Runtime.Simulation;
using TycoonVerse.Runtime.Simulation.Models;
using UnityEngine;
using UnityEngine.SceneManagement;
using UnityEngine.UI;

namespace TycoonVerse.Unity.Scenes
{
    /// <summary>
    /// Entry-point MonoBehaviour for MainDashboard.unity.
    /// Handles real-time UI updates, data retrieval from domain layer (via Repository pattern),
    /// and publishes analytics events relevant to a player’s session.
    /// </summary>
    [DisallowMultipleComponent]
    public sealed class MainDashboardController : MonoBehaviour, IEventSubscriber<FinancialSnapshot>,
                                                  IEventSubscriber<ConnectionStateChanged>
    {
        // ------------------------------ Serialized References ------------------------------ //

        [Header("UI: Financial")]
        [SerializeField] private TMP_Text _cashText;
        [SerializeField] private TMP_Text _revenueText;
        [SerializeField] private TMP_Text _ebitdaText;
        [SerializeField] private TMP_Text _debtEquityText;

        [Header("UI: Connection")]
        [SerializeField] private Image  _connectionStatusIcon;
        [SerializeField] private Sprite _onlineSprite;
        [SerializeField] private Sprite _offlineSprite;
        [SerializeField] private TMP_Text _connectionStatusLabel;

        [Header("UI: Misc")]
        [SerializeField] private Button  _settingsButton;
        [SerializeField] private CanvasGroup _loadingOverlay;

        // ------------------------------ Private State ------------------------------------- //

        private IFinancialSnapshotRepository _financialRepo;
        private IAnalyticsService            _analytics;
        private CancellationTokenSource      _cts;

        // --------------------------------------------------------------------------------- //
        #region Unity Lifecycle
        // --------------------------------------------------------------------------------- //

        private async void Awake()
        {
            // Defensive programming: ensure essential references are set via inspector.
            ValidateSerializedFields();

            // Infrastructure bootstrap: get runtime-registered services.
            _financialRepo = ServiceLocator.Resolve<IFinancialSnapshotRepository>();
            _analytics     = ServiceLocator.Resolve<IAnalyticsService>();

            _cts = new CancellationTokenSource();

            // Subscribe to domain events.
            EventBus.Subscribe(this as IEventSubscriber<FinancialSnapshot>);
            EventBus.Subscribe(this as IEventSubscriber<ConnectionStateChanged>);

            _settingsButton.onClick.AddListener(OnSettingsClicked);

            // Notify analytics that dashboard is displayed.
            _analytics.TrackScreen("MainDashboard");

            // Load initial data.
            await WarmupAsync(_cts.Token).ConfigureAwait(false);
        }

        private void OnDestroy()
        {
            _settingsButton.onClick.RemoveListener(OnSettingsClicked);
            EventBus.Unsubscribe(this as IEventSubscriber<FinancialSnapshot>);
            EventBus.Unsubscribe(this as IEventSubscriber<ConnectionStateChanged>);
            _cts.Cancel();
            _cts.Dispose();
        }

        #endregion

        // --------------------------------------------------------------------------------- //
        #region EventBus Callbacks
        // --------------------------------------------------------------------------------- //

        /// <inheritdoc />
        void IEventSubscriber<FinancialSnapshot>.OnEvent(FinancialSnapshot payload)
        {
            // Unity thread guaranteed by EventBus marshal; otherwise dispatch.
            UpdateFinancialUI(payload);
        }

        /// <inheritdoc />
        void IEventSubscriber<ConnectionStateChanged>.OnEvent(ConnectionStateChanged payload)
        {
            UpdateConnectionUI(payload.IsOnline);
        }

        #endregion

        // --------------------------------------------------------------------------------- //
        #region Private Helpers
        // --------------------------------------------------------------------------------- //

        /// <summary>
        /// Ensures that required inspector references have been assigned.
        /// </summary>
        /// <exception cref="InvalidOperationException">Thrown when a critical field is missing.</exception>
        private void ValidateSerializedFields()
        {
            if (_cashText == null)            throw new InvalidOperationException($"{nameof(_cashText)} not set.");
            if (_revenueText == null)         throw new InvalidOperationException($"{nameof(_revenueText)} not set.");
            if (_ebitdaText == null)          throw new InvalidOperationException($"{nameof(_ebitdaText)} not set.");
            if (_debtEquityText == null)      throw new InvalidOperationException($"{nameof(_debtEquityText)} not set.");
            if (_connectionStatusIcon == null)throw new InvalidOperationException($"{nameof(_connectionStatusIcon)} not set.");
            if (_connectionStatusLabel == null)throw new InvalidOperationException($"{nameof(_connectionStatusLabel)} not set.");
            if (_settingsButton == null)      throw new InvalidOperationException($"{nameof(_settingsButton)} not set.");
            if (_loadingOverlay == null)      throw new InvalidOperationException($"{nameof(_loadingOverlay)} not set.");
            if (_onlineSprite == null)        throw new InvalidOperationException($"{nameof(_onlineSprite)} not set.");
            if (_offlineSprite == null)       throw new InvalidOperationException($"{nameof(_offlineSprite)} not set.");
        }

        /// <summary>
        /// Async warm-up routine that fetches the latest financial snapshot and updates UI.
        /// </summary>
        private async Task WarmupAsync(CancellationToken token)
        {
            try
            {
                SetLoading(true);
                FinancialSnapshot snapshot = await _financialRepo.GetLatestSnapshotAsync(token);

                // May have been canceled while waiting.
                token.ThrowIfCancellationRequested();

                UpdateFinancialUI(snapshot);
            }
            catch (OperationCanceledException)
            {
                // Expected on scene unload.
            }
            catch (Exception ex)
            {
                _analytics.TrackError("DashboardWarmupFailure", ex);
                Debug.LogException(ex);
            }
            finally
            {
                SetLoading(false);
            }
        }

        /// <summary>
        /// Updates the HUD elements with the provided snapshot.
        /// </summary>
        private void UpdateFinancialUI(in FinancialSnapshot snapshot)
        {
            _cashText.text       = snapshot.Cash.ToString("C0");
            _revenueText.text    = snapshot.Revenue.ToString("C0");
            _ebitdaText.text     = snapshot.EBITDA.ToString("C0");
            _debtEquityText.text = $"{snapshot.DebtToEquity:P1}";

            // Fire analytics on major milestones.
            if (snapshot.Cash >= 1_000_000)
            {
                _analytics.TrackEvent("CashMillionMilestone", new Dictionary<string, object>
                {
                    { "player_id", SaveGame.UserId },
                    { "cash", snapshot.Cash }
                });
            }
        }

        /// <summary>
        /// Adjusts connection-status UI.
        /// </summary>
        private void UpdateConnectionUI(bool isOnline)
        {
            _connectionStatusIcon.sprite = isOnline ? _onlineSprite : _offlineSprite;
            _connectionStatusLabel.text  = isOnline ? "Online" : "Offline";

            _connectionStatusLabel.color = isOnline
                ? new Color32(  0, 200,  80, 255) // green
                : new Color32(255,  60,  60, 255); // red
        }

        private void SetLoading(bool isLoading)
        {
            _loadingOverlay.alpha          = isLoading ? 1f : 0f;
            _loadingOverlay.blocksRaycasts = isLoading;
            _loadingOverlay.interactable   = isLoading;
        }

        private void OnSettingsClicked()
        {
            _analytics.TrackEvent("OpenSettingsFromDashboard");

            // We load settings scene additively to keep dashboard alive underneath.
            SceneManager.LoadSceneAsync("Settings", LoadSceneMode.Additive);
        }

        #endregion
    }

    // ----------------------------------------------------------------------------------------------------------------
    #region Event Models
    // ----------------------------------------------------------------------------------------------------------------

    /// <summary>
    /// Raised by the SyncManager when the app’s connection state changes (offline ↔ online).
    /// </summary>
    public readonly struct ConnectionStateChanged
    {
        public bool IsOnline { get; }

        public ConnectionStateChanged(bool isOnline) => IsOnline = isOnline;
    }

    #endregion

    // ----------------------------------------------------------------------------------------------------------------
    #region Infrastructure (simplified stubs for compilation)
    // ----------------------------------------------------------------------------------------------------------------

    /// <summary>
    /// Simplified static service locator so the scene can resolve domain/infrastructure interfaces.
    /// In real code, we use an IoC container such as Zenject or our in-house DI framework.
    /// </summary>
    internal static class ServiceLocator
    {
        private static readonly Dictionary<Type, object> _services = new();

        public static void Register<T>(T instance) where T : notnull => _services[typeof(T)] = instance;

        public static T Resolve<T>() where T : notnull
        {
            if (_services.TryGetValue(typeof(T), out object obj) && obj is T typed)
            {
                return typed;
            }

            throw new InvalidOperationException($"Service of type {typeof(T).Name} is not registered.");
        }
    }

    /// <summary>
    /// Basic EventBus implementation (Observer pattern) for decoupled communication.
    /// Thread-safe and Unity-main-thread dispatch aware.
    /// </summary>
    internal static class EventBus
    {
        private static readonly Dictionary<Type, List<object>> _subscribers = new();

        // Unity’s main thread context
        private static readonly SynchronizationContext _unityContext = SynchronizationContext.Current;

        public static void Subscribe<TEvent>(IEventSubscriber<TEvent> subscriber)
        {
            Type key = typeof(TEvent);
            lock (_subscribers)
            {
                if (!_subscribers.TryGetValue(key, out List<object> list))
                {
                    list = new List<object>();
                    _subscribers[key] = list;
                }

                if (!list.Contains(subscriber)) list.Add(subscriber);
            }
        }

        public static void Unsubscribe<TEvent>(IEventSubscriber<TEvent> subscriber)
        {
            Type key = typeof(TEvent);
            lock (_subscribers)
            {
                if (_subscribers.TryGetValue(key, out List<object> list))
                {
                    list.Remove(subscriber);
                }
            }
        }

        public static void Publish<TEvent>(TEvent payload)
        {
            Type key = typeof(TEvent);
            List<object> snapshot;

            lock (_subscribers)
            {
                if (!_subscribers.TryGetValue(key, out List<object> list)) return;
                snapshot = new List<object>(list);
            }

            // Ensure event is executed on Unity main thread.
            void Dispatch() {
                foreach (object o in snapshot)
                {
                    if (o is IEventSubscriber<TEvent> sub)
                    {
                        try
                        {
                            sub.OnEvent(payload);
                        }
                        catch (Exception ex)
                        {
                            Debug.LogException(ex);
                        }
                    }
                }
            }

            if (SynchronizationContext.Current == _unityContext)
            {
                Dispatch();
            }
            else
            {
                _unityContext.Post(_ => Dispatch(), null);
            }
        }
    }

    internal interface IEventSubscriber<in TEvent>
    {
        void OnEvent(TEvent payload);
    }

    #endregion
}

// --------------------------------------------------------------------------------------------------------------------
// NOTE:
// 1) This code intentionally includes simplified stubs for ServiceLocator, EventBus, etc., to focus on Unity scene
//    logic while keeping the file self-contained and compile-ready for demonstration.
// 2) Production builds would leverage compile-time DI, partial classes, splitting code across multiple files, and
//    platform-specific implementations hidden behind interfaces.
// --------------------------------------------------------------------------------------------------------------------
```