```xml
<Project Sdk="Microsoft.NET.Sdk">

  <!--────────────────────────────────────────────────────────────────────────────
      PaletteStream.Quality  •  Unit / Integration Test Project
      --------------------------------------------------------------------------
      This test project validates the “Quality” micro-service responsible for
      data-quality rules, anomaly detection, and metric collection inside the
      PaletteStream ETL Canvas platform.

      Test Stack
      • xUnit                    – Unit-testing framework
      • Moq                      – Mocking framework
      • FluentAssertions         – Readable BDD-style assertions
      • Microsoft.NET.Test.Sdk   – VS- & CLI-test runner
      • Coverlet                 – Cross-platform code-coverage collector
      • Roslyn Analyzers         – Static-analysis & code-style enforcement
  ────────────────────────────────────────────────────────────────────────────-->

  <PropertyGroup>
    <!-- Target modern .NET for optimal performance and long-term support -->
    <TargetFramework>net7.0</TargetFramework>

    <!-- Enable nullable reference-type annotations -->
    <Nullable>enable</Nullable>

    <!-- Use latest C# language features -->
    <LangVersion>latest</LangVersion>

    <!-- WE CARE ABOUT CODE QUALITY -->
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <WarningsAsErrors>CS*;CA*;IDE*</WarningsAsErrors>

    <!-- Produce deterministic, CI-friendly builds -->
    <Deterministic>true</Deterministic>
    <ContinuousIntegrationBuild>true</ContinuousIntegrationBuild>

    <!-- Disable packing; this is a test assembly -->
    <IsPackable>false</IsPackable>

    <!-- Embed PDBs for easier symbol resolution in containerized CI -->
    <DebugType>embedded</DebugType>

    <!-- Generate XML docs to feed into DocFX & API surface diff checks -->
    <GenerateDocumentationFile>true</GenerateDocumentationFile>

    <!-- Make tests run in parallel unless the Collection attribute overrides it -->
    <ParallelizeAssembly>true</ParallelizeAssembly>
  </PropertyGroup>

  <!--──────────────────────────────────────────────────
      Package dependencies
  ───────────────────────────────────────────────────-->
  <ItemGroup>
    <!-- TEST FRAMEWORK -->
    <PackageReference Include="xunit"                     Version="2.5.0" />
    <PackageReference Include="xunit.runner.visualstudio" Version="2.5.0">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
    </PackageReference>

    <!-- MOCKING & ASSERTIONS -->
    <PackageReference Include="Moq"               Version="4.20.70" />
    <PackageReference Include="FluentAssertions"  Version="6.11.0" />

    <!-- TEST SDK & COVERAGE -->
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.8.0" />
    <PackageReference Include="coverlet.collector"     Version="3.3.2">
      <!-- Collect coverage only in Debug builds to speed up Release pipelines -->
      <Condition>'$(Configuration)' == 'Debug'</Condition>
    </PackageReference>

    <!-- STATIC ANALYSIS -->
    <PackageReference Include="Microsoft.CodeAnalysis.NetAnalyzers"
                      Version="8.0.0-preview">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
  </ItemGroup>

  <!--──────────────────────────────────────────────────
      Project references
  ───────────────────────────────────────────────────-->
  <ItemGroup>
    <!-- Reference the production code that we’re testing -->
    <!-- Path rooted relative to the tests/ folder structure -->
    <ProjectReference Include="..\PaletteStream.Quality\PaletteStream.Quality.csproj" />
    
    <!-- Optionally reference shared testing utilities -->
    <ProjectReference Include="..\..\TestInfrastructure\PaletteStream.Testing.Helpers.csproj"
                      Condition="Exists('..\..\TestInfrastructure\PaletteStream.Testing.Helpers.csproj')" />
  </ItemGroup>

  <!--──────────────────────────────────────────────────
      RunSettings for Fine-grained Test Configuration
  ───────────────────────────────────────────────────-->
  <ItemGroup>
    <None Include="paletteStream.runsettings" CopyToOutputDirectory="PreserveNewest" />
  </ItemGroup>

  <!--──────────────────────────────────────────────────
      Code Coverage & Analyzer Configuration
  ───────────────────────────────────────────────────-->
  <PropertyGroup>
    <!-- Coverlet collects coverage in Cobertura+opencover; used by Sonar & Azure DevOps -->
    <CollectCoverage Condition="'$(Configuration)'=='Debug'">true</CollectCoverage>
    <CoverletOutputFormat Condition="'$(Configuration)'=='Debug'">cobertura,opencover</CoverletOutputFormat>
    <CoverletOutput Condition="'$(Configuration)'=='Debug'">$(OutputDirectory)\coverage\</CoverletOutput>

    <!-- Exclude generated/auto-code from coverage metrics -->
    <ExcludeByAttribute>GeneratedCodeAttribute, CompilerGeneratedAttribute</ExcludeByAttribute>
  </PropertyGroup>

  <!--──────────────────────────────────────────────────
      Custom targets (e.g., publish test results)
  ───────────────────────────────────────────────────-->
  <Target Name="PostTest" AfterTargets="Test">
    <!-- Publish coverage report for CI dashboards -->
    <Message Importance="high" Text="Code coverage reports generated at $(CoverletOutput)" Condition="'$(Configuration)'=='Debug'" />
  </Target>

</Project>
```