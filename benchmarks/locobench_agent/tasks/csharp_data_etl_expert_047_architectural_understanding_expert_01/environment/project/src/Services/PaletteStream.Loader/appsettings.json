{
  "Service": {
    "Name": "PaletteStream.Loader",
    "InstanceId": "loader-${HOSTNAME}",
    "Environment": "Development"
  },
  "AllowedHosts": "*",

  "ConnectionStrings": {
    "DataLake:Raw": "s3://palettestream/raw/",
    "DataLake:Refined": "s3://palettestream/refined/",
    "DataLake:Curated": "s3://palettestream/curated/",
    "MetadataStore": "Server=sqlserver,1433;Database=PaletteStreamMeta;User Id=sa;Password=Your_password123;",
    "Redis": "redis:6379"
  },

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    },
    "Seq": {
      "Enabled": true,
      "ServerUrl": "http://seq:5341",
      "ApiKey": ""
    },
    "Console": {
      "FormatterName": "json"
    }
  },

  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.Seq" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "formatter": "Serilog.Formatting.Compact.RenderedCompactJsonFormatter, Serilog.Formatting.Compact"
        }
      },
      {
        "Name": "Seq",
        "Args": {
          "serverUrl": "http://seq:5341",
          "apiKey": ""
        }
      }
    ]
  },

  "Kafka": {
    "BootstrapServers": "broker:9092",
    "Security": {
      "Protocol": "PLAINTEXT"
    },
    "Topics": {
      "InboundPigments": "palettestream.pigments.raw",
      "DLQ": "palettestream.deadletter"
    },
    "Consumer": {
      "GroupId": "palettestream.loader",
      "AutoOffsetReset": "earliest",
      "EnableAutoCommit": false,
      "BatchSize": 500
    },
    "Producer": {
      "EnableIdempotence": true,
      "CompressionType": "gzip"
    }
  },

  "Hangfire": {
    "DashboardPath": "/jobs",
    "Queues": [ "default", "critical" ],
    "RetryCount": 5,
    "WorkerCount": 20,
    "Storage": {
      "Type": "sqlserver",
      "ConnectionString": "Server=sqlserver,1433;Database=PaletteStreamMeta;User Id=sa;Password=Your_password123;"
    }
  },

  "Transformations": {
    "DefaultStrategy": "Aggregation",
    "AvailableStrategies": [ "Aggregation", "Enrichment", "Anonymization", "Normalization" ],
    "GpuAcceleration": {
      "Enabled": true,
      "Provider": "ComputeSharp",
      "DevicePreference": "DiscreteGpu"
    }
  },

  "DataQuality": {
    "Thresholds": {
      "MissingValues": 0.02,
      "DuplicateRows": 0.01
    },
    "Rulesets": [ "schema-validation", "null-checks", "primary-key-uniqueness" ],
    "OnViolation": {
      "Action": "RouteToDLQ",
      "DLQTopic": "palettestream.deadletter"
    }
  },

  "Monitoring": {
    "Prometheus": {
      "Enabled": true,
      "ScrapeEndpoint": "/metrics",
      "Port": 9095
    },
    "HealthChecks": {
      "Liveness": "/health/live",
      "Readiness": "/health/ready"
    },
    "Alerting": {
      "PagerDuty": {
        "Enabled": true,
        "ApiKey": "PD_API_KEY",
        "ServiceId": "PD_SERVICE_ID"
      }
    }
  },

  "ObserverPattern": {
    "EventBus": "kafka",
    "Topics": {
      "TransformationEvents": "palettestream.events.transformations",
      "JobLifecycle": "palettestream.events.jobs"
    }
  },

  "RetryPolicy": {
    "MaxRetryAttempts": 3,
    "InitialBackoffSeconds": 5,
    "ExponentialBackoffFactor": 2
  }
}