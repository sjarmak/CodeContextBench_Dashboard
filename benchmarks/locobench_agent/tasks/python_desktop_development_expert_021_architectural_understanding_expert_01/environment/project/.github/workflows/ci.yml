```yaml
# -------------------------------------------------------------------------------------------------------------------
# File: .github/workflows/ci.yml
# Description: Continuous-integration pipeline for the FlockDesk desktop suite.
#   â€¢ Multi-OS / multi-Python build matrix
#   â€¢ Linting (flake8), formatting (black --check), typing (mypy)
#   â€¢ Headless Qt (Xvfb) test execution
#   â€¢ Unit + integration testing with coverage
#   â€¢ Documentation build
#   â€¢ Re-usable artifacts for downstream CD / release
# -------------------------------------------------------------------------------------------------------------------
name: CI

on:
  push:
    branches: [main, dev, qa/*]
    paths-ignore:
      - "docs/**"
      - "**/*.md"
  pull_request:
    branches: [main, dev]
  workflow_dispatch:

permissions:
  contents: read
  pull-requests: write

env:
  CACHE_VERSION: v1        # bump to bust all caches
  POETRY_VERSION: "1.7.1"
  PIP_DISABLE_PIP_VERSION_CHECK: 1
  PIP_PROGRESS_BAR: "off"
  PYTHONBREAKPOINT: "0"    # disable pdb breakpoints in CI
  PYTHONWARNINGS: "ignore::DeprecationWarning"
  # Enable headless Qt on macOS/Windows; will be overwritten by Xvfb on Linux
  QT_QPA_PLATFORM: "offscreen"

jobs:
  build-test:
    name: "Tests â€¢ ${{ matrix.os }} â€¢ Py ${{ matrix.python-version }}"
    runs-on: ${{ matrix.os }}
    timeout-minutes: 30

    strategy:
      fail-fast: false
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        python-version: ["3.10", "3.11"]

    steps:
      - name: ğŸ› Checkout source
        uses: actions/checkout@v4
        with:
          fetch-depth: 2

      - name: â˜• Setup JDK (for Sentry symbol upload)
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: "17"

      - name: ğŸ Setup Python ${{ matrix.python-version }}
        id: python
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
          cache: "pip"
          cache-dependency-path: |
            pyproject.toml
            requirements/**
            .github/workflows/**
          allow-prereleases: false

      # -----------------------------------------------------------------------
      # System packages required by Qt / PySide6 for headless execution
      # -----------------------------------------------------------------------
      - name: ğŸ–¼  Install Xvfb & Qt deps (Linux)
        if: runner.os == 'Linux'
        run: |
          sudo apt-get update
          sudo apt-get install --no-install-recommends -y \
            xvfb libegl1-mesa libxkbcommon-x11-0 libxcb-cursor0 \
            libxcb-icccm4 libxcb-image0 libxcb-keysyms1 libxcb-render-util0 \
            libxcb-xinerama0 libxcb-xkb1 libqt6gui6 libqt6svg6

      - name: â–¶ï¸  Launch Xvfb (Linux)
        if: runner.os == 'Linux'
        run: |
          /usr/bin/Xvfb :99 -screen 0 1920x1080x24 &
          echo "DISPLAY=:99" >> $GITHUB_ENV

      # -----------------------------------------------------------------------
      # Install dependencies via Poetry to ensure lockfile reproducibility
      # -----------------------------------------------------------------------
      - name: ğŸ“¦ Install Poetry
        run: |
          python -m pip install --upgrade pip
          pip install poetry==${POETRY_VERSION}

      - name: ğŸ“¦ Install project dependencies
        run: |
          poetry config virtualenvs.create false
          poetry install --no-interaction --no-root
          poetry run pip install -r requirements/dev.txt
          poetry install --no-interaction --only-root

      # -----------------------------------------------------------------------
      # Code Quality Gates
      # -----------------------------------------------------------------------
      - name: ğŸ” Lint (flake8)
        run: |
          poetry run flake8 flockdesk tests

      - name: ğŸ¨ Check formatting (black)
        run: |
          poetry run black --check flockdesk tests

      - name: ğŸ§ Static typing (mypy)
        run: |
          poetry run mypy flockdesk

      # -----------------------------------------------------------------------
      # Testing
      # -----------------------------------------------------------------------
      - name: ğŸ§ª Run tests
        run: |
          poetry run pytest -q --cov=flockdesk --cov-report=xml

      - name: ğŸ“Š Upload coverage
        if: github.repository_owner == 'FlockDesk'
        uses: codecov/codecov-action@v4
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          fail_ci_if_error: true
          files: coverage.xml
          flags: unittests
          name: codecov-flockdesk
          verbose: false

      # -----------------------------------------------------------------------
      # Artifacts
      # -----------------------------------------------------------------------
      - name: ğŸ“¦ Build wheel
        run: |
          poetry build -f wheel

      - name: ğŸ“Œ Archive wheel
        uses: actions/upload-artifact@v4
        with:
          name: wheel-${{ runner.os }}-py${{ matrix.python-version }}
          path: dist/*.whl
          retention-days: 7

  docs:
    name: "Docs â€¢ Ubuntu â€¢ Py 3.11"
    runs-on: ubuntu-latest
    needs: build-test
    timeout-minutes: 15

    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
          cache: "pip"

      - name: ğŸ“š Install doc dependencies
        run: |
          python -m pip install -U pip
          pip install poetry
          poetry install --only docs --no-interaction
          pip install sphinx==7.2.6 furo

      - name: ğŸ”¨ Build HTML docs
        run: |
          sphinx-build -n -W docs docs/_build/html

      - name: ğŸšš Upload built docs
        uses: actions/upload-artifact@v4
        with:
          name: docs-html
          path: docs/_build/html
          retention-days: 14

  release:
    # Triggered automatically when a new version tag (v*) is pushed
    if: startsWith(github.ref, 'refs/tags/v')
    name: "Release â€¢ Py 3.11 â€¢ Ubuntu"
    runs-on: ubuntu-latest
    needs: [build-test, docs]
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0   # ensure tags are available

      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
          cache: "pip"

      - name: ğŸ“¦ Install build dependencies
        run: |
          python -m pip install -U pip
          pip install poetry

      - name: ğŸ—ï¸  Build sdist + wheel
        run: |
          poetry build

      - name: ğŸ–‹ï¸  Generate changelog snippet
        id: changelog
        run: |
          echo "changelog<<EOF" >> $GITHUB_OUTPUT
          git log $(git describe --tags --abbrev=0)..HEAD --pretty='%h %s' >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT

      - name: ğŸš€ Publish GitHub Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: ${{ github.ref_name }}
          name: FlockDesk ${{ github.ref_name }}
          body: |
            ## Changelog
            ${{ steps.changelog.outputs.changelog }}
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: ğŸ“¤ Upload assets
        uses: softprops/action-gh-release@v2
        with:
          files: dist/*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```