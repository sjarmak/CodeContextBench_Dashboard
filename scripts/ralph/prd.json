{
  "project": "CodeContextBench",
  "branchName": "ralph/10figure-benchmark-expansion",
  "description": "Expand 10Figure benchmark to 10 tasks across Kubernetes, Django, Envoy, TensorFlow with cross-repo tasks for MCP value evaluation",
  "userStories": [
    {
      "id": "US-001",
      "title": "Pin repo versions and update base Dockerfile for multi-repo",
      "description": "As a benchmark runner, I need the base Docker image to reference all 4 Phase 1 repos at pinned commits so cross-repo tasks can execute.",
      "acceptanceCriteria": [
        "Update base/build.sh to clone Kubernetes (v1.29.3), Django (5.0.4), Envoy (v1.29.2), TensorFlow (v2.16.1) at pinned tags",
        "Update base/Dockerfile to copy all 4 repos into /10figure/src/ (kubernetes/, django/, envoy/, tensorflow/)",
        "Use shallow clones (--depth 1) to minimize image size",
        "Update base/README.md with repo versions and expected image size",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "build.sh clones all 4 repos at pinned tags with shallow clones; Dockerfile validates all 4 under /10figure/src/"
    },
    {
      "id": "US-002",
      "title": "Analyze Kubernetes and Envoy for cross-repo task candidates",
      "description": "As a benchmark developer, I need candidate symbols and code paths in Kubernetes and Envoy that share patterns (gRPC, protobuf, xDS) for cross-repo tasks.",
      "acceptanceCriteria": [
        "Identify 3-5 candidate symbols/code paths in Kubernetes suitable for benchmark tasks",
        "Identify 3-5 candidate symbols/code paths in Envoy suitable for benchmark tasks",
        "Identify 2-3 cross-repo patterns shared between K8s and Envoy (e.g., gRPC server setup, health check implementations, protobuf usage)",
        "Output candidates as markdown table in benchmarks/10figure/docs/task_candidates.md with columns: task_type, repos, symbol/target, difficulty, MCP_advantage_rationale",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Analyze Django and TensorFlow for cross-repo task candidates",
      "description": "As a benchmark developer, I need candidate symbols and code paths in Django and TensorFlow that share patterns (Python C extensions, serialization, config systems) for cross-repo tasks.",
      "acceptanceCriteria": [
        "Identify 3-5 candidate symbols/code paths in Django suitable for benchmark tasks",
        "Identify 3-5 candidate symbols/code paths in TensorFlow suitable for benchmark tasks",
        "Identify 2-3 cross-repo patterns shared between Django and TensorFlow (e.g., Python C extension patterns, serialization, decorator usage)",
        "Append candidates to benchmarks/10figure/docs/task_candidates.md",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Create cross-repo task: gRPC health check pattern (K8s + Envoy)",
      "description": "As a benchmark developer, I need a cross-repo cross_file_reasoning task that requires tracing gRPC health check implementation across Kubernetes and Envoy.",
      "acceptanceCriteria": [
        "Create cross_repo_reasoning_01/ directory with instruction.md describing the task",
        "Task requires agent to trace health check protocol implementation in both K8s and Envoy codebases",
        "Create task.toml with metadata (id, type=cross_file_reasoning, max_time=15, difficulty=hard)",
        "Create task.yaml with target symbols and expected call chain paths",
        "Create tests/expected_changes.json with ground truth",
        "Create tests/test.sh that validates agent output spans both repos",
        "Create environment/Dockerfile inheriting from harbor-10figure:base",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Create cross-repo task: protobuf API migration (K8s + Envoy)",
      "description": "As a benchmark developer, I need a cross-repo api_upgrade task that requires migrating a deprecated protobuf pattern used in both Kubernetes and Envoy.",
      "acceptanceCriteria": [
        "Create cross_repo_upgrade_01/ directory with instruction.md",
        "Task requires agent to find and migrate a deprecated protobuf API pattern in both repos",
        "Create task.toml, task.yaml, environment/Dockerfile, tests/test.sh, tests/expected_changes.json",
        "test.sh validates patches in both /10figure/src/kubernetes/ and /10figure/src/envoy/",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Create cross-repo task: Python C extension bug pattern (Django + TensorFlow)",
      "description": "As a benchmark developer, I need a cross-repo bug_localization task that requires finding similar null/None handling bugs in Django and TensorFlow Python C code.",
      "acceptanceCriteria": [
        "Create cross_repo_bug_01/ directory with instruction.md",
        "Task requires agent to find a similar bug pattern in both Django's C extensions and TensorFlow's Python/C++ bindings",
        "Create task.toml, task.yaml, environment/Dockerfile, tests/test.sh, tests/expected_changes.json",
        "test.sh validates patches in both /10figure/src/django/ and /10figure/src/tensorflow/",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Create cross-repo task: middleware/filter chain refactor (Django + Envoy)",
      "description": "As a benchmark developer, I need a cross-repo refactor_rename task that requires renaming a shared architectural pattern across Django middleware and Envoy filter chains.",
      "acceptanceCriteria": [
        "Create cross_repo_refactor_01/ directory with instruction.md",
        "Task requires agent to rename a pattern used in both Django middleware chain and Envoy HTTP filter chain",
        "Create task.toml, task.yaml, environment/Dockerfile, tests/test.sh, tests/expected_changes.json",
        "test.sh validates renames applied correctly in both repos",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Create single-repo task: Django deep call chain tracing",
      "description": "As a benchmark developer, I need a single-repo cross_file_reasoning task for Django that requires tracing a request through middleware, URL routing, and view dispatch.",
      "acceptanceCriteria": [
        "Create django_reasoning_01/ directory with instruction.md",
        "Task requires tracing an HTTP request from WSGIHandler through middleware stack to view dispatch (5+ hop call chain)",
        "Create task.toml, task.yaml, environment/Dockerfile, tests/test.sh, tests/expected_changes.json",
        "Task targets real Django symbols (e.g., WSGIHandler.__call__, BaseHandler.get_response, middleware chain)",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Create single-repo task: TensorFlow op registration refactor",
      "description": "As a benchmark developer, I need a single-repo refactor_rename task for TensorFlow that requires renaming across C++ and Python layers.",
      "acceptanceCriteria": [
        "Create tensorflow_refactor_01/ directory with instruction.md",
        "Task requires renaming a TensorFlow op or kernel across C++ registration, Python wrapper, and test files",
        "Create task.toml, task.yaml, environment/Dockerfile, tests/test.sh, tests/expected_changes.json",
        "Task targets real TensorFlow symbols spanning C++ and Python code",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Update smoke test and validate all 10 tasks",
      "description": "As a benchmark runner, I need the smoke test to validate all 10 new task directories have correct structure.",
      "acceptanceCriteria": [
        "Update tests/smoke_test_10figure.py to discover all task directories (not hardcoded list)",
        "Smoke test validates all 10 scored tasks have required files (instruction.md, task.toml, task.yaml, environment/Dockerfile, tests/test.sh)",
        "Smoke test validates simple_test_01 separately as smoke-only",
        "All 10 tasks pass structural validation",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Update README and docs for expanded benchmark",
      "description": "As a benchmark user, I need documentation reflecting the full 10-task benchmark with cross-repo coverage.",
      "acceptanceCriteria": [
        "README.md updated with task table listing all 10 scored tasks plus smoke test",
        "README documents cross-repo vs single-repo task distinction",
        "README lists all 4 repos with pinned commit SHAs",
        "docs/10FIGURE.md updated with expanded task descriptions and cross-repo design rationale",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Sync to ccb-10figure repo and CodeContextBench_Dashboard",
      "description": "As a project maintainer, I need the expanded benchmark pushed to both repos.",
      "acceptanceCriteria": [
        "All 10 task directories plus simple_test_01 committed to sjarmak/ccb-10figure",
        "benchmarks/10figure/ in CodeContextBench_Dashboard matches ccb-10figure contents",
        "No broken references between repos",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    }
  ]
}
